% ------------------------------------------------------------
% Autogenerated LaTeX file for books
% db2latex RELEASE: 0.8pre1
% db2latex VERSION: $Id: VERSION.xml,v 1.6 2004/01/31 12:47:11 j-devenish Exp $
% fithesis VERSION: 1.40
% ------------------------------------------------------------
\def\clsclass{rapport3}
\documentclass{fithesis}
% --------------------------------------------
% MetaFont and MetaPost logo support
% --------------------------------------------
\usepackage{mflogo}
% --------------------------------------------
% Load fithesis param 
% --------------------------------------------
\thesistitle{Studio pro grafický návrh podlahových krytin v~interiéru}
\thesissubtitle{Bakaláøská práce}
\thesisstudent{Marek Pasiènyk}
\thesiswoman{false}
\thesislang{cs}
\thesisyear{podzim 2007}
\thesisfaculty{fi}
\thesisadvisor{Mgr. Petr Tobola, Ph.D.}
% --------------------------------------------
\label{id308356}\usepackage{ifthen}
% --------------------------------------------
% Check for PDFLaTeX/LaTeX 
% --------------------------------------------
\newif\ifpdf
\ifx\pdfoutput\undefined
\pdffalse % we are not running PDF\LaTeX 
\else
\pdfoutput=1 % we are running PDF\LaTeX 
\pdftrue
\fi
% --------------------------------------------
% Load graphicx package with pdf if needed 
% --------------------------------------------
\ifpdf
\usepackage[pdftex]{graphicx}
\pdfcompresslevel=9
\else
\usepackage{graphicx}
\fi
\usepackage{anysize}
\marginsize{3cm}{2.5cm}{3.5cm}{3.5cm}

\makeatletter
% redefine the listoffigures and listoftables so that the name of the chapter
% is printed whenever there are figures or tables from that chapter. encourage
% pagebreak prior to the name of the chapter (discourage orphans).
\let\save@@chapter\@chapter
\let\save@@l@figure\l@figure
\let\the@l@figure@leader\relax
\def\@chapter[#1]#2{\save@@chapter[{#1}]{#2}%
\addtocontents{lof}{\protect\def\the@l@figure@leader{\protect\pagebreak[0]\protect\contentsline{chapter}{\protect\numberline{\thechapter}#1}{}{\thepage}}}%
\addtocontents{lot}{\protect\def\the@l@figure@leader{\protect\pagebreak[0]\protect\contentsline{chapter}{\protect\numberline{\thechapter}#1}{}{\thepage}}}%
}
\renewcommand*\l@figure{\the@l@figure@leader\let\the@l@figure@leader\relax\save@@l@figure}
\let\l@table\l@figure
\makeatother
\usepackage{fancyhdr}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}
% Safeguard against long headers.
\IfFileExists{truncate.sty}{
\usepackage{truncate}
% Use an ellipsis when text would be larger than x% of the text width.
% Preserve left/right text alignment using \hfill (works for English).
\fancyhead[ol]{\truncate{0.49\textwidth}{\sl\leftmark}}
\fancyhead[er]{\truncate{0.49\textwidth}{\hfill\sl\rightmark}}
\fancyhead[el]{\truncate{0.49\textwidth}{\sl\leftmark}}
\fancyhead[or]{\truncate{0.49\textwidth}{\hfill\sl\rightmark}}
}{\typeout{WARNING: truncate.sty wasn't available and functionality was skipped.}}
\pagestyle{fancy}
% ---------------------- 
% Most Common Packages   
% ---------------------- 
\usepackage{latexsym}         
\usepackage{enumerate}         
\usepackage{fancybox}      
\usepackage{float}       
\usepackage{ragged2e}       
\usepackage{fancyvrb}         
\makeatletter\@namedef{FV@fontfamily@default}{\def\FV@FontScanPrep{}\def\FV@FontFamily{}}\makeatother
\fvset{obeytabs=true,tabsize=3}
\makeatletter
\let\dblatex@center\center\let\dblatex@endcenter\endcenter
\def\dblatex@nolistI{\leftmargin\leftmargini\topsep\z@ \parsep\parskip \itemsep\z@}
\def\center{\let\@listi\dblatex@nolistI\@listi\dblatex@center\let\@listi\@listI\@listi}
\def\endcenter{\dblatex@endcenter}
\makeatother
\usepackage{rotating}         
\usepackage{subfigure}         
\usepackage{tabularx}         
\usepackage{url}         
% --------------------------------------------
% Load hyperref package with pdf if needed 
% --------------------------------------------
\ifpdf
\usepackage[pdftex,bookmarksnumbered,colorlinks,backref,bookmarks,breaklinks,linktocpage,plainpages=false, pdfstartview=FitH, plainpages=false, pdfpagelabels, unicode]{hyperref}
\else
\usepackage[bookmarksnumbered,colorlinks,backref,bookmarks,breaklinks,linktocpage,plainpages=false, plainpages=false, pdfpagelabels]{hyperref}
\fi
% --------------------------------------------
% ----------------------------------------------
% Define a new LaTeX environment (adminipage)
% ----------------------------------------------
\newenvironment{admminipage}%
{ % this code corresponds to the \begin{adminipage} command
 \begin{Sbox}%
 \begin{minipage}%
} %done
{ % this code corresponds to the \end{adminipage} command
 \end{minipage}
 \end{Sbox}
 \fbox{\TheSbox}
} %done
% ----------------------------------------------
% Define a new LaTeX length (admlength)
% ----------------------------------------------
\newlength{\admlength}
% ----------------------------------------------
% Define a new LaTeX environment (admonition)
% With 2 parameters:
% #1 The file (e.g. note.pdf)
% #2 The caption
% ----------------------------------------------
\newenvironment{admonition}[2] 
{ % this code corresponds to the \begin{admonition} command
 \hspace{0mm}\newline\hspace*\fill\newline
 \noindent
 \setlength{\fboxsep}{5pt}
 \setlength{\admlength}{\linewidth}
 \addtolength{\admlength}{-10\fboxsep}
 \addtolength{\admlength}{-10\fboxrule}
 \admminipage{\admlength}
 {\bfseries \sc\large{#2}} \newline
 \\[1mm]
 \sffamily
 \includegraphics[width=1cm]{#1}
 \addtolength{\admlength}{-1cm}
 \addtolength{\admlength}{-20pt}
 \begin{minipage}[lt]{\admlength}
 \parskip=0.5\baselineskip \advance\parskip by 0pt plus 2pt
} %done
{ % this code corresponds to the \end{admonition} command
 \vspace{5mm} 
 \end{minipage}
 \endadmminipage
 \vspace{.5em}
 \par
}
% --------------------------------------------
% Commands to manage/style/create floats      
% figures, tables, algorithms, examples, eqn  
% --------------------------------------------
 \floatstyle{plain}
 \restylefloat{figure}
 \floatstyle{plain}
 \restylefloat{table}
 \floatstyle{plain}
 \newfloat{program}{ht}{lop}[section]
 \floatstyle{plain}
 \newfloat{example}{ht}{loe}[section]
 \floatname{example}{Pøíklad}
 \floatstyle{plain}
 \newfloat{dbequation}{ht}{loe}[section]
 \floatname{dbequation}{Rovnice}
 \floatstyle{boxed}
 \newfloat{algorithm}{ht}{loa}[section]
 \floatname{algorithm}{Algorithm}
\ifpdf
\DeclareGraphicsExtensions{.pdf,.png,.jpg}
\else
\DeclareGraphicsExtensions{.eps}
\fi
% --------------------------------------------
% $latex.caption.swapskip enabled for $formal.title.placement support
\newlength{\docbooktolatextempskip}
\newcommand{\captionswapskip}{\setlength{\docbooktolatextempskip}{\abovecaptionskip}\setlength{\abovecaptionskip}{\belowcaptionskip}\setlength{\belowcaptionskip}{\docbooktolatextempskip}}
\usepackage[czech]{babel} 
% Guard against a problem with old package versions.
\makeatletter
\AtBeginDocument{
\DeclareRobustCommand\ref{\@refstar}
\DeclareRobustCommand\pageref{\@pagerefstar}
}
\makeatother
% --------------------------------------------
\makeatletter
\newcommand{\dbz}{\penalty \z@}
\newcommand{\docbooktolatexpipe}{\ensuremath{|}\dbz}
\newskip\docbooktolatexoldparskip
\newcommand{\docbooktolatexnoparskip}{\docbooktolatexoldparskip=\parskip\parskip=0pt plus 1pt}
\newcommand{\docbooktolatexrestoreparskip}{\parskip=\docbooktolatexoldparskip}
\def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else\hbox{}\thispagestyle{empty}\newpage\if@twocolumn\hbox{}\newpage\fi\fi\fi}
\usepackage[latin2]{inputenc}
\usepackage[T1]{fontenc}

\ifx\dblatex@chaptersmark\@undefined\def\dblatex@chaptersmark#1{\markboth{\MakeUppercase{#1}}{}}\fi
\let\save@makeschapterhead\@makeschapterhead
\def\dblatex@makeschapterhead#1{\vspace*{-80pt}\save@makeschapterhead{#1}}
\def\@makeschapterhead#1{\dblatex@makeschapterhead{#1}\dblatex@chaptersmark{#1}}

\AtBeginDocument{\ifx\refname\@undefined\let\docbooktolatexbibname\bibname\def\docbooktolatexbibnamex{\bibname}\else\let\docbooktolatexbibname\refname\def\docbooktolatexbibnamex{\refname}\fi}
% Facilitate use of \cite with \label
\newcommand{\docbooktolatexbibaux}[2]{%
  \protected@write\@auxout{}{\string\global\string\@namedef{docbooktolatexcite@#1}{#2}}
}
% Provide support for bibliography `subsection' environments with titles
\newenvironment{docbooktolatexbibliography}[3]{
   \begingroup
   \let\save@@chapter\chapter
   \let\save@@section\section
   \let\save@@@mkboth\@mkboth
   \let\save@@bibname\bibname
   \let\save@@refname\refname
   \let\@mkboth\@gobbletwo
   \def\@tempa{#3}
   \def\@tempb{}
   \ifx\@tempa\@tempb
      \let\chapter\@gobbletwo
      \let\section\@gobbletwo
      \let\bibname\relax
   \else
      \let\chapter#2
      \let\section#2
      \let\bibname\@tempa
   \fi
   \let\refname\bibname
   \begin{thebibliography}{#1}
}{
   \end{thebibliography}
   \let\chapter\save@@chapter
   \let\section\save@@section
   \let\@mkboth\save@@@mkboth
   \let\bibname\save@@bibname
   \let\refname\save@@refname
   \endgroup
}

%\usepackage{cite}
%\renewcommand\citeleft{(}  % parentheses around list
%\renewcommand\citeright{)} % parentheses around list
\newcommand{\docbooktolatexcite}[2]{%
  \@ifundefined{docbooktolatexcite@#1}%
  {\cite{#1}}%
  {\def\@docbooktolatextemp{#2}\ifx\@docbooktolatextemp\@empty%
   \cite{\@nameuse{docbooktolatexcite@#1}}%
   \else\cite[#2]{\@nameuse{docbooktolatexcite@#1}}%
   \fi%
  }%
}
\newcommand{\docbooktolatexbackcite}[1]{%
  \ifx\Hy@backout\@undefined\else%
    \@ifundefined{docbooktolatexcite@#1}{%
      % emit warning?
    }{%
      \ifBR@verbose%
        \PackageInfo{backref}{back cite \string`#1\string' as \string`\@nameuse{docbooktolatexcite@#1}\string'}%
      \fi%
      \Hy@backout{\@nameuse{docbooktolatexcite@#1}}%
    }%
  \fi%
}

% --------------------------------------------
% A way to honour <footnoteref>s
% Blame j-devenish (at) users.sourceforge.net
% In any other LaTeX context, this would probably go into a style file.
\newcommand{\docbooktolatexusefootnoteref}[1]{\@ifundefined{@fn@label@#1}%
  {\hbox{\@textsuperscript{\normalfont ?}}%
    \@latex@warning{Footnote label `#1' was not defined}}%
  {\@nameuse{@fn@label@#1}}}
\newcommand{\docbooktolatexmakefootnoteref}[1]{%
  \protected@write\@auxout{}%
    {\global\string\@namedef{@fn@label@#1}{\@makefnmark}}%
  \@namedef{@fn@label@#1}{\hbox{\@textsuperscript{\normalfont ?}}}%
  }

\makeindex
% index labeling helper
\newif\ifdocbooktolatexprintindex\docbooktolatexprintindextrue
\let\dbtolatex@@theindex\theindex
\let\dbtolatex@@endtheindex\endtheindex
\@ifundefined{@openrighttrue}{\newif\if@openright}{}
\def\theindex{\relax}
\def\endtheindex{\relax}
\newenvironment{dbtolatexindex}[2]
   {
\if@openright\cleardoublepage\else\clearpage\fi
\let\dbtolatex@@indexname\indexname
\def\dbtolatex@current@indexname{#2}
\ifx\dbtolatex@current@indexname\@empty                                                                                             \def\dbtolatex@current@indexname{\dbtolatex@@indexname}
\fi
\def\dbtolatex@indexlabel{%
 \ifnum \c@secnumdepth >\m@ne \ifx\c@chapter\undefined\refstepcounter{section}\else\refstepcounter{chapter}\fi\fi%
 \label{#1}\hypertarget{#1}{\dbtolatex@current@indexname}%
 \global\docbooktolatexprintindexfalse}
\def\indexname{\ifdocbooktolatexprintindex\dbtolatex@indexlabel\else\dbtolatex@current@indexname\fi}
\dbtolatex@@theindex
   }
   {
\dbtolatex@@endtheindex\let\indexname\dbtolatex@@indexname
   }

\newlength\saveparskip \newlength\saveparindent
\newlength\tempparskip \newlength\tempparindent

\def\docbooktolatexgobble{\expandafter\@gobble}
% Prevent multiple openings of the same aux file
% (happens when backref is used with multiple bibliography environments)
\ifx\AfterBeginDocument\undefined\let\AfterBeginDocument\AtBeginDocument\fi
\AfterBeginDocument{
   \let\latex@@starttoc\@starttoc
   \def\@starttoc#1{%
      \@ifundefined{docbooktolatex@aux#1}{%
         \global\@namedef{docbooktolatex@aux#1}{}%
         \latex@@starttoc{#1}%
      }{}
   }
}
% --------------------------------------------
% Hacks for honouring row/entry/@align
% (\hspace not effective when in paragraph mode)
% Naming convention for these macros is:
% 'docbooktolatex' 'align' {alignment-type} {position-within-entry}
% where r = right, l = left, c = centre
\newcommand{\docbooktolatex@align}[2]{\protect\ifvmode#1\else\ifx\LT@@tabarray\@undefined#2\else#1\fi\fi}
\newcommand{\docbooktolatexalignll}{\docbooktolatex@align{\raggedright}{}}
\newcommand{\docbooktolatexalignlr}{\docbooktolatex@align{}{\hspace*\fill}}
\newcommand{\docbooktolatexaligncl}{\docbooktolatex@align{\centering}{\hfill}}
\newcommand{\docbooktolatexaligncr}{\docbooktolatex@align{}{\hspace*\fill}}
\newcommand{\docbooktolatexalignrl}{\protect\ifvmode\raggedleft\else\hfill\fi}
\newcommand{\docbooktolatexalignrr}{}
\ifx\captionswapskip\@undefined\newcommand{\captionswapskip}{}\fi
\makeatother
\title{\bfseries Studio pro grafický návrh podlahových krytin v~interiéru\\[12pt]\normalsize Bakaláøská práce}
\author{Marek Pasiènyk}
% --------------------------------------------
\makeglossary
% --------------------------------------------

\setcounter{tocdepth}{4}

\setcounter{secnumdepth}{4}
\addto\captionsczech{\def\indexname{Rejst\v{r}\'{\i}k}}
\addto\captionsczech{\def\appendixname{P\v{r}\'{i}loha}}
\addto\captionsczech{\def\refname{Literatura}}
\begin{document}
% --------------------------------------------
% Useing fithesis
% --------------------------------------------
\FrontMatter
\ThesisTitlePage
\begin{ThesisDeclaration}
\DeclarationText
\AdvisorName
\end{ThesisDeclaration}

% --------------------------------------------
% Thanks 
% --------------------------------------------
\begin{ThesisThanks}

Chtìl bych podìkovat Mgr. Petru Tobolovi, Ph.D. za vedení bakaláøské práce a jeho cenné rady pøi øe¹ení této práce. Také bych rád podìkoval celé své rodinì i své pøítelkyni za neocenitelnou podporu a trpìlivost.
\end{ThesisThanks}

% --------------------------------------------
% Abstract 
% --------------------------------------------
\begin{ThesisAbstract}

Tato práce se zabývá problematikou návrhu a kalkulace plovoucích podlah v~interiérech a následnou implementací v~CAD systémech. Cílem bylo vyvinout u¾ivatelsky jednoduchou aplikaci pro rychlý návrh interiérù napodobující klasické metody pokládky. Tím posléze docílit co nejpøesnìj¹í kalkulace materiálu a vizuálnì vìrného zobrazení v~cílovém prostoru.
\end{ThesisAbstract}

% --------------------------------------------
% KeyWords 
% --------------------------------------------
\begin{ThesisKeyWords}
AEC, CAD, OpenGL, plovoucí podlahy, návrh interiéru, vizualizace interiéru, kladeèské plány, FloorPlanner\end{ThesisKeyWords}

\makeatletter
\def\dbtolatex@contentsid{id380016}
\def\dbtolatex@@contentsname{\latex@@contentsname}
\let\latex@@contentsname\contentsname
\newif\ifdocbooktolatexcontentsname\docbooktolatexcontentsnametrue
\def\dbtolatex@contentslabel{%
 \label{\dbtolatex@contentsid}\hypertarget{\dbtolatex@contentsid}{\dbtolatex@@contentsname}%
 \global\docbooktolatexcontentsnamefalse}
\def\contentsname{\ifdocbooktolatexcontentsname\dbtolatex@contentslabel\else\dbtolatex@@contentsname\fi}
\let\save@@@mkboth\@mkboth
\let\@mkboth\@gobbletwo
\tableofcontents
\let\@mkboth\save@@@mkboth
\let\contentsname\latex@@contentsname
\Hy@writebookmark{}{\dbtolatex@@contentsname}{\dbtolatex@contentsid}{0}{toc}%
\makeatother
				\MainMatter

% -------------------------------------------------------------
% Chapter Úvod 
% ------------------------------------------------------------- 	
\chapter{Úvod}
\label{ch01}\hypertarget{ch01}{}%

Rùzné kreslicí metody patøí v~architektuøe ji¾ odedávna k~základním metodám pøenesení pøedstav na papír èi jiné médium. Vznikají tak dvojrozmìrné nákresy, které jsou nepostradatelné pro ve¹kerá odvìtví architektury. Nákresy plní velmi dùle¾itou úlohu pøi plánovaní i realizaci staveb. Jsou toti¾ jakýmsi spojením mezi architekty a lidmi, kteøí daný projekt realizují. Ruku v~ruce s~dvojrozmìrným nákresem se èasto vytváøí trojrozmìrný model. A~proto¾e lidský mozek zpracovává sérii bokorysù, pùdorysù a nárysù dost obtí¾nì, zhmotòuje trojrozmìrný model lidské pøedstavy podstatnì lépe. S~pøíchodem poèítaèù s~pokroèilej¹ími grafickými jednotkami bylo mo¾né tyto dvì, do této doby oddìlené, metody návrhu spojit a zároveò pøidat ètvrtý rozmìr -- animaci. Od prùlomového vynálezu svìtelného pera se tyto systémy a aplikace velice rychle vyvíjely a získaly z~anglického {\em{computer-aided design}} zkrácené oznaèení {\em{CAD}}. Tato zkratka v¹ak nezahrnuje jen aplikace urèené pro stavebnictví, ale i pro ostatní odvìtví, pou¾ívající pøi práci rýsovací prkno. Pro systémy, navr¾ené speciálnì pro architekturu a stavebnictví, se pak v¾ila zkratka {\em{AEC}}, z~anglického {\em{Architecture, Engineering, Construction}}.

{\em{CAD}} se zpoèátku ve stavitelství pou¾íval výhradnì k~návrhùm exteriérù. Bylo tomu tak zejména kvùli nízké kvalitì zobrazení, která byla pro exteriérové prostory dostaèující, av¹ak pro interiéry nikoli. Dnes je ji¾ v¹ak situace jiná a existuje celá øada nástrojù a aplikací pro návrh interiérù. Dokonce v~podstatì ka¾dá velká firma zabývající se vybavením interiérù poskytuje ke svému sortimentu i nìjakou více èi ménì sofistikovanou aplikaci pro zobrazení kolekce svých výrobkù v~prostoru.

Vizualizace interiérù bývá èasto zásadní, ale zdaleka ne jediným vyu¾itím tìchto aplikací. Pomáhají toti¾ zároveò pøesnìji specifikovat náklady na celý projekt. Proto je zde v¾dy snaha o~vytvoøení co nejpøesnìj¹ího modelu, který následnì mù¾e u¹etøit velké mno¾ství financí. Tento problém existuje i u~návrhu plovoucích podlah. Jednoduché kalkulace materiálu zde, kvùli pøedem tì¾ko pøedvídatelnému odpadu, èasto selhávají. Proto je vytvoøení aplikace pro øe¹ení této problematiky velkým pøínosem pro toto odvìtví.

Tato práce se vìnuje vývoji grafického studia pro vizualizaci a kalkulaci plovoucích podlah v~interiéru. Cílem je vytvoøit aplikaci, která jednoduchým zpùsobem vytvoøí a zobrazí u¾ivatelem nakreslenou místnost vèetnì zvolené plovoucí podlahy. Vzhled plovoucí podlahy je pøi tom co nejvíce pøiblí¾en reálnému vzhledu v~dané místnosti. Plovoucí podlaha je toti¾ vykreslena podle stejných pravidel, jakými se øídí reálná pokládka podlah. Tím lze docílit pøesného zobrazení podlahy v~prostoru a zároveò získat velmi pøesné údaje o~nákladech na realizaci.

Na zaèátku práce je podrobnìji rozvedena problematika návrhu a kalkulace interiérù. Kromì toho je zde také popsán vývoj {\em{CAD}} aplikací a jejich vyu¾ití v~oblasti návrhu interiérù. Obsahem dal¹í kapitoly je popis a zhodnocení nìkterých aplikací, zabývajících se podobnou problematikou. Ve ètvrté kapitole se práce vìnuje algoritmùm a postupùm, které byly stì¾ejní pro vývoj aplikace {\em{FloorPlanner}}. Ta je popsána v~následující kapitole. Vysvìtlení implementací modifikovaných algoritmù jsou obsahem pøedposlední ¹esté kapitoly. Práci uzávírá závìreèná kapitola se zhodnocením pøínosu aplikace.

% -------------------------------------------------------------
% Chapter Problematika návrhu interiéru 
% ------------------------------------------------------------- 	
\chapter{Problematika návrhu interiéru}
\label{ch02}\hypertarget{ch02}{}%

% ------------------------   
% Section 
\section{Teorie pokládky a kalkulace plovoucích podlah}
\label{sec0201}\hypertarget{sec0201}{}%

Plovoucí podlahy jsou moderním prvkem souèasného architektonického prostoru. Jejich popularita stále roste a jsou vyvíjeny nejrùznìj¹í nové technologie a materiály pro jejich výrobu. Vzniká tak ¹iroká ¹kála plovoucích podlah z~celého svìta, které se kvalitativnì velmi li¹í. Cena tìch nejinovativnìj¹ích a nejkvalitnìj¹ích øe¹ení se pohybuje v~øádu nìkolika tisíc korun za metr ètvereèní. Vzniká proto potøeba co nejpøesnìj¹ího odhadu nákladù na realizaci daného projektu. Tyto moderní podlahy bývají navíc èasto pokládány v~moderních atypických prostorech, kde bývá odhad dosti obtí¾ný. Øe¹ení nabízí aplikace {\em{FloorPlanner}}, je¾ vznikla v~rámci této práce. Jejím úkolem je pøíblí¾it odhad skuteèným nákladùm.

Odhad se vìt¹inou provádí jednoduchým pøiètením proøezu k~plo¹e místnosti. Proøez tvoøí oøezané èásti podlahových dílcù, které ji¾ nemohou být pou¾ity pro pokládku a tvoøí nutný odpad. Vìt¹inou je odhadovaný proøez 5 a¾ 7 \%. Reálnì v¹ak mù¾e kolísat mezi 3 a 15 \%. Mno¾ství proøezu je závislé na mnoha faktorech:

\begin{itemize}
%--- Item
\item 
{\bfseries{Velikost místnosti}} --- mno¾ství proøezu je nepøímo závislé na velikosti místnosti. Ve vìt¹ích místnostech, kde se dá polo¾it vìt¹í procento celých podlahových lamel, bývá mnohem ménì odpadu.

%--- Item
\item 
{\bfseries{Velikost lamel}} --- s~rostoucí velikostí podlahových dílcù se rapidnì zvy¹uje i odpad. Navíc právì nejdra¾¹í celodøevìné plovoucí podlahy jsou vyrábìny ve velmi dlouhých formátech podlahových lamel. Tato skupina podlah tvoøí nejproblematiètìj¹í skupinu pøi odhadu nákladù.

%--- Item
\item 
{\bfseries{Orientace lamel}} --- smìr pokládky se ve vìt¹inì pøípadù øídí jednou z~obvodových zdí. U~zdí, které nemají shodný, nebo kolmý úhel ke zdi øídící, vzniká u~ka¾dé øezané lamely nezanedbatelný odpad.

%--- Item
\item 
{\bfseries{Balení podlah}} --- plovoucí podlahy nejsou dodávány po jednotlivých kusech, nýbr¾ v~baleních po nìkolika kusech. To se stává problémem zvlá¹tì u~velkoformátových lamel, kdy ve støednì velké místnosti mù¾e rozdíl jednoho balení pøesáhnout i 15 \% z~finálních nákladù. Proto je tøeba k~tomuto faktu pøihlédnout a odhadnout mno¾ství co nejlépe.

%--- Item
\item 
{\bfseries{Styl pokládky}} --- existuje nìkolik zpùsobù, jak lze lamely vùèi sobì pokládat. Nejstriktnìj¹í {\em{selský styl}}, který dovoluje pouze pøibli¾nì polovièní pøekryv lamel v~sousedících øadách, dosahuje nejvìt¹ího odpadu. Následuje {\em{anglický styl}}, kdy musí být pøekryv u~v¹ech lamel shodný. Nejbì¾nìj¹í je v¹ak {\em{rustikální styl}}, u~kterého je nutné dodr¾et pouze minimální pøekrytí. Spotøebuje se tak i mnohem ménì materálu.

%--- Item
\item 
{\bfseries{Optický vzhled podlah}} --- plovoucí podlahy jsou dnes ozvlá¹tòovány rùznými prvky, které mìní jejich optické vlastnosti v~plo¹e. Jejich hrany mohou být napøíklad zkoseny a tak vytváøet podélné èi obì¾né spáry. Rùzná orientace pokládky pak mù¾e prostor opticky zú¾it, nebo roz¹iøovat. Èasto se podlahy pro opticky harmonický vzhled orientují podle dveøí èi oken.

%--- Item
\item 
{\bfseries{Ostatní aspekty}} --- kromì pøibli¾nì pøedvídatelných aspektù v¹ak existují i faktory, které pøi návrhu pøedvídat nelze. Mezi nì patøí nedokonalý tvar zdí místnosti, lamely s~výrobními vadami nebo chyby a nepøesnosti podlaháøù pøi realizaci. Proto je v¾dy tøeba brát výsledky kalkulace s~rezervou.

\end{itemize}
\noindent 

% ------------------------   
% Section 
\section{CAD aplikace}
\label{sec0202}\hypertarget{sec0202}{}%

{\em{Computer Aided Design}} neboli poèítaèem podporovaný návrh je souhrnným názvem pro aplikace nebo obor zabývající se projektováním èi konstruováním na poèítaèi. Jedná se tedy o~pøenesení rýsovacího plátna na obrazovky poèítaèù. Proto je zde zahrnuta celá øada oborovì rùznorodých aplikací od elektrotechniky, strojírenství a¾ po stavebnictví.
\subsection{Historie a souèasný stav}
\label{sec020201}\hypertarget{sec020201}{}%

Kreslicí aplikace se zaèaly vyvíjet u¾ v~padesátých letech po vynálezu svìtelného pera, av¹ak první {\em{CAD}} aplikace vznikla a¾ roku 1962 díky {\em{Ivanu Sutherlandovi}}\label{fn02020101}\begingroup\catcode`\#=12\footnote{
Kreslicí program {\em{Sketchpad}} byl pøedmìtem Sutherlandovy disertaèní práce.
}\endgroup\docbooktolatexmakefootnoteref{fn02020101}. Vìt¹í roz¹íøení pøi¹lo a¾ v~sedmdesátých letech s~pøíchodem minipoèítaèù. I~pøes znaèný pokrok v¹ak grafika stále zùstávala vektorová a práce s~aplikacemi byla u¾ivatelsky dosti nepøátelská. Zlom pøi¹el a¾ v~roce 1978 s~pøíchodem rastrové grafiky. Pøicházely i nové algoritmy v~poèítaèové grafice, a tak napøíklad v~roce 1980 vzniká modul pro {\em{AEC/CAD}} aplikaci {\em{Arch Model}}\docbooktolatexcite{CAD history}{}, který doká¾e poprvé renderovat plochy objektù.

Po pøíchodu procesorù {\em{Intel x86}} dochází ke standardizaci hardware a grafické aplikace se postupnì pøesouvají i na osobní poèítaèe. Vznikají editory jako {\em{AutoCAD}}, {\em{VersaCAD}} a jiné. Zvìt¹il se také význam trojrozmìrného modelu, který pùvodnì tvoøil spí¹e presentaèní funkci. V~dne¹ní dobì je návrh ve dvou a tøech rozmìrech propojen, co¾ pøispívá k~vìt¹í pøesnosti finálních návrhù. Bìhem této éry vznikají v~poèítaèové grafice nové pokroèilé metody jako jsou osvìtlovací modely s~podporou radiozity, sledování paprsku nebo kvalitní mapování a filtrování textur. Díky jejich implementacím v~{\em{CAD}} aplikacích jsou dnes vizualizace modelù témìø fotorealisticky pøesné.

Výrazným pøínosem je i intuitivnìj¹í interakce èlovìka s~poèítaèem. U¾ samotný pøechod z~rýsovacího prkna na poèítaè znamenal podstatnou úsporu èasu. Zpoèátku dosti rozdílné aplikace se dnes vlivem konkurenèního prostøedí stávají velice podobnými. Existují v¹ak dvì velice rozdílné kategorie {\em{CAD}} systémù.

\begin{itemize}
%--- Item
\item 
{\bfseries{Obecné CAD systémy}} pøedstavují vývojovì star¹í metody návrhù a svou koncepcí pøipomínají klasické rýsovací prkno. Jde o~nejvíce roz¹íøenou skupinu produktù. Jejich hlavní výhodou jsou vzájemnì pøenositelné formáty a jednoduché ovládání. Novì se ji¾ ov¹em objevuje snaha implementovat do obecných {\em{CAD}} systémù moduly, které je roz¹íøí o~objektovì orientovaný pøístup. Typickými aplikacemi této tøídy jsou {\em{AutoCAD}} nebo {\em{Microstation}}.

%--- Item
\item 
{\bfseries{Objektovì orientované CAD systémy}} naproti tomu nabízejí diametrálnì odli¹ný pøístup k~návrhu. Mají své vlastní formáty a zpìtná kompatibilita s~obecnými {\em{CAD}} systémy je jen èásteèná. Je zde mnohem kvalitnìji provázáno dvojrozmìrné zobrazení s~trojrozmìrným. Jednotlivé prvky návrhu jsou reprezentovány objekty a jejich skládáním vzniká výsledný model. Do této kategorie patøí pøedev¹ím velice kvalitní {\em{AEC/CAD}} systémy {\em{ArchiCAD}} nebo {\em{ALLPLAN FT}}.

\end{itemize}
\noindent 
\subsection{AEC/CAD systémy}
\label{sec020202}\hypertarget{sec020202}{}%

Tato kapitola se vìnuje kategorii {\em{CAD}} systémù, do které spadá i aplikace {\em{FloorPlanner}}. Jedná se o~{\em{CAD}} aplikace pro projektování v~oblasti architektury a stavebnictví, které vyu¾ívají objektovì orientovaného pøístupu. {\em{AEC/CAD}} aplikace nabízejí ¹irokou ¹kálu objektù, které se pak navzájem kombinují do výsledného modelu. Pøíkladem mù¾e být aplikace {\em{ArchiCAD}}. Zde jsou objekty umístìny do hierarchických struktur. {\em{ArchiCAD}} má pro tyto struktury vlastní jazyk {\em{GDL}}\label{fn02020201}\begingroup\catcode`\#=12\footnote{
Geometric Description Language je "BASIC-like" programovacím jazykem.
}\endgroup\docbooktolatexmakefootnoteref{fn02020201}. Objekty uvnitø tìchto struktur na sebe inteligentnì reagují, èím¾ dochází napøíklad ke spojování zdí, k~výøezùm ve zdech pro okna èi dveøe. Zároveò je mo¾né ve¹keré atributy objektù kdykoli mìnit. Výsledný model se pøizpùsobuje.

Dùle¾itou vlastností objektù jsou jejich nevektorové informace. Z~nich lze toti¾ následnì generovat výkazy èi soupisy materiálù potøebných pro celou stavbu, nebo jen pro nìkterou z~jejich èástí. Tímto lze stanovit pøedbì¾nou cenu projektu.

% -------------------------------------------------------------
% Chapter Stávající aplikace pro návrh interiéru 
% ------------------------------------------------------------- 	
\chapter{Stávající aplikace pro návrh interiéru}
\label{ch03}\hypertarget{ch03}{}%

Vizualizací interiérù se dnes zabývá celá øada aplikací. Konkurence mezi výrobci vybavení pro interiéry je velká a pøedstavivost zákazníkù malá. Proto se tito výrobci sna¾í poskytnout zákazníkùm mo¾nost vizualizace jejich pøedstav. Konkrétnì v~oblasti plovoucích podlah jde vìt¹inou o~webové aplikace, které pouze urèitým zpùsobem pracují s~fotografiemi místností.

Aplikace pro pøesnìj¹í návrh podlah, ale i obkladù, se dnes bì¾nì pou¾ívají pouze pro keramické dla¾by. Dovolují vytváøet pøesné kladeèské plány a odhadnout i náklady. Obdobné aplikace pro plovoucí podlahy prozatím buï neexistují, nebo nejsou volnì pøístupné.

Dal¹í mo¾ností je vyu¾ít jedno ze sofistikovaných {\em{AEC/CAD}} øe¹ení. Aplikace této kategorie poskytují nástroje pro návrh kompletních staveb, tedy i interiérù a jejich podlah. Lze je doplnit i nábytkem a ostatním vybavením a tím vytvoøit reálnou kopii realizované místnosti. Tyto aplikace sice vìt¹inou obsahují nástroje pro generování výpisù materiálù, ov¹em u~podlah jde pouze o~plochu místnosti a tak problém s~mno¾stvím proøezu zùstává nevyøe¹en. Následuje nìkolik aplikací, které se vizualizací plovoucích podlah zabývají. Jsou zde jednoduché webové aplikace i komplexní objektovì orientované {\em{AEC/CAD}} øe¹ení.

% ------------------------   
% Section 
\section{eShowroom}
\label{sec0301}\hypertarget{sec0301}{}%

Aplikace {\em{eShowroom}}\label{sec030101}\begingroup\catcode`\#=12\footnote{
Dostupná na adrese {\textless}\url{http://www.europe.pergo.com/Consumer/Templates/eshowroom/CS_eshowroom.asp}{\textgreater} (ovìøeno k~6. lednu 2008).
}\endgroup\docbooktolatexmakefootnoteref{sec030101}, která byla vyvinuta pro ¹védskou spoleènost {\em{Pergo}}, patøí právì do kategorie jednoduchých webových aplikací. Byla vyvinuta pro prezentaci kolekce plovoucích podlah {\em{Pergo}}. U¾ivatel má na výbìr ze tøí rùzných místností, pøièem¾ má mo¾nost mìnit barvu zdí, nìkterého z~doplòkù a samozøejmì vzor plovoucí podlahy. Tyto tøi místnosti jsou pouze tøi fotografie, na které jsou pomocí masky naná¹eny rùzné vzory èi barvy. U¾ivatel tak nijak nemù¾e pøizpùsobit prostor ani pohled v~prostoru. Pøínosem v¹ak je mo¾nost barevného sladìní a hlavnì zobrazení plovoucí podlahy v~plo¹e, co¾ dává u¾ivateli rozhodnì lep¹í pøedstavu ne¾ jeden samostatný vzorek. Aplikace dokonce disponuje jednoduchým kalkulátorem, který po zadání nìkolika údajù o~místnosti pøibli¾nì vypoèítá potøebné mno¾ství balení podlah a doporuèí i barevnì sladìné li¹ty. Tento výpoèet lze v¹ak pova¾ovat za správný jen v~místnostech støední velikosti a navíc obdélníkového tvaru.

% figure ------------------------------------------------------
\begin{figure}[hbt]
\hypertarget{pic030101}{}%
\begin{center}

{{\includegraphics[]{apl01}}\hypertarget{id380423}{}%
\label{id380423}
}
{{\caption[{Vizualizace plovoucí podlahy v~aplikaci {\em{eShowroom}}.}]{{{Vizualizace plovoucí podlahy v~aplikaci {\em{eShowroom}}.}}}\label{pic030101}}}
\end{center}
\end{figure}

% ------------------------   
% Section 
\section{Room Designer}
\label{sec0302}\hypertarget{sec0302}{}%

Pokroèilej¹í webovou aplikací je bezesporu {\em{Room Designer}}\label{sec030201}\begingroup\catcode`\#=12\footnote{
Dostupná na {\textless}\url{http://www.parador.de/swf/raumdesigner/de.php}{\textgreater} (ovìøeno k~6. lednu 2008).
}\endgroup\docbooktolatexmakefootnoteref{sec030201}, vyvinutý pro nìmeckou firmu {\em{Parador}}. Místo pøednastavených fotografií toti¾ umo¾òuje vlo¾it vlastní. Pomocí krátkého prùvodce, bìhem nìho¾ jsou jednoduchými kliknutími oznaèeny oblasti podlahy a zdí, je fotografie pøipravena. Pro u¾ivatele je k~dispozici kompletní kolekce firmy {\em{Parador}}. Korekci perspektivy je mo¾né provést pomocí malého lichobì¾níku uprostøed. Posuvníkem pro nastavení prùhlednosti podlahy lze na novou podlahu pøenést odlesky té pùvodní. Kromì podlahy lze onaèením stìn pozmìnit i malbu na stìnách.

% figure ------------------------------------------------------
\begin{figure}[hbt]
\hypertarget{pic030201}{}%
\begin{center}

{{\includegraphics[]{apl02}}\hypertarget{id380482}{}%
\label{id380482}
}
{{\caption[{Porovnání místností s~pùvodní podlahou a podlahou vytvoøenou aplikací {\em{Room Designer}}.}]{{{Porovnání místností s~pùvodní podlahou a podlahou vytvoøenou aplikací {\em{Room Designer}}.}}}\label{pic030201}}}
\end{center}
\end{figure}

Aplikace sice umo¾òuje zobrazit podlahu v~zamý¹leném prostoru, av¹ak zpracování podlah není pøíli¹ kvalitní. Pøi nastavení perspektivy je obraz deformován bez následného vyhlazení, a tak se vzor podlahy spí¹e ztrácí v~¹umu. Bohu¾el tato aplikace neumo¾òuje jakýmkoli zpùsobem stanovit náklady na realizaci.

% ------------------------   
% Section 
\section{ArchiCAD a ArchiTiler}
\label{sec0303}\hypertarget{sec0303}{}%

Aplikace {\em{ArchiCAD}} od spoleènosti {\em{Graphisoft}} je dnes jedním z~nejpou¾ívanìj¹ích AEC/CAD systémù. Pro konstrukci budov vyu¾ívá objektovì orientovaného pøístupu {\em{BIM}}\label{fn030301}\begingroup\catcode`\#=12\footnote{
Building Information Modeling.
}\endgroup\docbooktolatexmakefootnoteref{fn030301}. V~ArchiCADu se tato technologie pou¾ívá pod názvem {\em{Virtuální budova}}. Celý model se sestává ze vzájemnì propojeným konstrukèních prvkù, jako jsou zdi, dveøe, okna apod. Ty jsou pak v~rùzných re¾imech zobrazení vykreslovány odpovídajícím zpùsobem. Díky tomu lze okam¾itì zobrazovat reálný model v~3D, okótované výkresy ve 2D, ale i automaticky aktualizované tabulky s~výkazy výmìr a výpisy prvkù. Souèástí aplikace jsou rozsáhlé knihovny tìchto prvkù. Jsou popsány jednoduchým jazykem {\em{GDL}} a není tedy problém pøidat prvky, které u¾ivateli v~knihovnách chybí. Výsledný projekt lze exportovat v~mnoha formátech. Trojrozmìrné vizualizace lze provádìt renderingem pøímo v~aplikaci, nebo pomocí nìkterého z~externích rendererù. Pro vlo¾ení speciálních konstrukèních prvkù lze vyu¾ít jednoho z~mnoha plug-inù.

% figure ------------------------------------------------------
\begin{figure}[hbt]
\hypertarget{pic030301}{}%
\begin{center}

{{\includegraphics[]{apl03}}\hypertarget{id380550}{}%
\label{id380550}
}
{{\caption[{Kladeèské plány dla¾by v~plug-inu {\em{ArchiTiler}} aplikace {\em{ArchiCAD}}.}]{{{Kladeèské plány dla¾by v~plug-inu {\em{ArchiTiler}} aplikace {\em{ArchiCAD}}.}}}\label{pic030301}}}
\end{center}
\end{figure}

Pro práci s~plovoucími podlahami lze jednodu¹e pou¾ít texturu na prvek podlahy. Pro kalkulaci a reálnìj¹í vzhled lze pou¾ít propracovaného plug-inu {\em{ArchiTiles}} firmy {\em{Cigraph}}. Ten je primárnì urèen pro kladeèské plány a kalkulaci pokládky dla¾dic a dla¾by. Zmìnou tvaru a textury v¹ak lze roz¹íøit pou¾ití i na plovoucí podlahy. Je mo¾né nastavit posun mezi dílci v~jednotlivých øadách, jen¾ v¹ak mù¾e být pouze konstantní a tak nelze docílit rustikálního stylu pokládky, kdy je dosa¾eno ni¾¹í spotøeby materiálu. Bohu¾el také vestavìný algoritmus nepoèítá s~pou¾itím oøezaných dílù v~dal¹ích øadách. Jinak v¹ak {\em{ArchiTiles}} doká¾e automaticky generovat výkazy materiálu vèetnì kalkulace proøezu.

Toto øe¹ení je nejlep¹í ze zde presentovaných aplikací pro vizualizaci a kalkulaci plovoucích podlah. Dovoluje pou¾ití i pro jiné typy podlah. Díky rozsáhlým knihovnám {\em{ArchiCADu}} lze interiér vylep¹it dle svých pøedstav. Fotorealistické zobrazení a kalkulace vèetnì výpoètu proøezu jsou dal¹ími z~mnoha výhod. Je zde ale i nìkolik záporù. Aplikace {\em{ArchiCAD}} je primárnì urèena pro návrh kompletních budov a komplexnosti aplikace odpovídá i její cena, která se pøi zakoupení jedné licence i s~plug-inem {\em{ArchiTiles}} pohybuje kolem 140 000 Kè. To je v¹ak pro firmy, hledající pouze program pro vizualizaci podlah, pøíli¹ nákladná a tì¾ko vratná investice. Dal¹í nevýhodou je komplikovanost {\em{ArchiCADu}}, èím¾ je tato aplikace pro nezku¹eného u¾ivatele v~podstatì nepou¾itelná.

% -------------------------------------------------------------
% Chapter Pou¾ité algoritmy, metody a techniky 
% ------------------------------------------------------------- 	
\chapter{Pou¾ité algoritmy, metody a techniky}
\label{ch04}\hypertarget{ch04}{}%

V~prùbìhu vývoje aplikace {\em{FloorPlanner}} bylo zapotøebí vyøe¹it nìkolik úskalí. Nejzásadnìj¹í problémy a hlavnì metody pro jejich øe¹ení jsou obsahem právì této kapitoly.

% ------------------------   
% Section 
\section{Triangulace konkávních polygonù}
\label{sec0401}\hypertarget{sec0401}{}%

Triangulací se v~poèítaèové grafice rozumí rozklad polygonu na trojúhelníky. Trojúhelníky se navzájem nesmìjí pøekrývat a jejich sjednocení je rovno pùvodnímu polygonu. Triangulací mù¾eme komplikované konkávní polygony rozdìlit na jednoduché trojúhelníky, na nich¾ lze provádìt nìkteré operace, které bychom s~pùvodním polygonem nebyli schopni provádìt. Trojúhelníky jsou toti¾ v¾dy rovinné, jednodu¹e se rasterizují a jsou jednoznaènì interpolovatelné.

Triangulaèních algoritmù je celá øada. Li¹í se èasovou i pamì»ovou slo¾itostí, komplikovaností implementace, ale i kvalitou podávaných výsledkù. Nìkteré vytváøejí aproximace rovnostranných trojúhelníkù. Triangulace mù¾e také rozdìlit polygon buï na trojúhelníky, které mají pouze vrcholy shodné s~vrcholy pùvodního polygonu, nebo na trojúhelníky s~vrcholy kdekoli uvnitø nebo na okraji polygonu. V~aplikaci {\em{FloorPlanner}} bude pou¾ita prvnì zmiòovaná metoda, nebo» je implementovatelná pomocí nástavbové knihovny {\em{GLU}} knihovny {\em{OpenGL}}. Právì v~souvislosti s~{\em{OpenGL}} je èastìji pou¾íván obecnìj¹í pojem {\em{teselace}}\label{fn040101}\begingroup\catcode`\#=12\footnote{
Z~latinského {\em{tessella}} neboli kousek mozaiky.
}\endgroup\docbooktolatexmakefootnoteref{fn040101}, který oznaèuje rozklad polygonu na lépe zpracovatelné struktury, vìt¹inou právì trojúhelníky. Prostorové objekty bývají dìleny na ètyøstìny, nebo ¹estistìny.

% ------------------------   
% Section 
\section{Alias a jeho øe¹ení}
\label{sec0402}\hypertarget{sec0402}{}%

\subsection{Alias}
\label{sec040201}\hypertarget{sec040201}{}%

{\em{Alias}} je jedním z~nejèastìj¹ích a nejdiskutovanìj¹ích problémù v~souèasné poèítaèové grafice. Jde o~obecný pojem pro vadu vznikající podvzorkováním vstupního signálu. Dochází k~nìmu pøi poru¹ení {\em{Nyquistova kritéria}}, které øíká, ¾e vzorkovací frekvence musí být nejménì dvakrát vìt¹í, ne¾ je nejvìt¹í frekvence ve vstupních datech. Toho v¹ak èasto na monitorech s~bì¾ným rozli¹ením nelze dosáhnout. Podvzorkování pak zpùsobuje zobrazení vysokých frekvencí do frekvencí ni¾¹ích, co¾ vede ke vzniku nepøíjemných ru¹ivých elementù. V~aplikaci {\em{FloorPlanner}} je v¹ak kladen dùraz na kvalitní zobrazení textur. Zároveò je také vìt¹inou pou¾íván pohled, kdy je {\em{alias}} velice markantní a ne¾ádoucí. Existuje nìkolik projevù {\em{aliasu}}, z~nich¾ dva jsou v~poèítaèové grafice nejbì¾nìj¹í:

\begin{itemize}
%--- Item
\item 
{\bfseries{Jaggies}}\label{fn04020101}\begingroup\catcode`\#=12\footnote{
Z~anglického {\em{jagged edges}} neboli \glqq zubaté\textquotedblleft{} hrany.
}\endgroup\docbooktolatexmakefootnoteref{fn04020101}--- pojmem {\em{jaggies}} se obvykle oznaèuje jev pøíli¹ ostrého a zubatého pøechodu na okrajích polygonu. Vzniká rasterizací polygonu do koneènì velkého rozli¹ení. Vzhledem k~tomu, ¾e vìt¹ina dne¹ních scén, vèetnì scén v~aplikaci {\em{FloorPlanner}}, je tvoøena polygonálními modely a následnì pøevedena do rastru, vypadají jejich okraje, zvlá¹tì v~kritických úhlech, dosti nevzhlednì.

%--- Item
\item 
{\bfseries{Moiré}}\label{fn04020102}\begingroup\catcode`\#=12\footnote{
Podle tkaniny mající vzhled zèeøené vodní hladiny.
}\endgroup\docbooktolatexmakefootnoteref{fn04020102} --- pøi vzorkování textur s~pravidelným vzorem mù¾e docházet k~nepøíjemnému efektu moiré, který se projevuje zobrazováním vzorku s~vy¹¹í frekvencí jako vzorku s~frekvencí ni¾¹í. Vzorkování s~vy¹¹í vzorkovací frekvencí tento problém pouze odsune do frekvencí vy¹¹ích. V~aplikaci {\em{FloorPlanner}} se textury s~pravidelným vzorem asi pøíli¹ neobjeví. Av¹ak v~pøípadì vykreslení velkého poètu shodných polygonù vedle sebe se v~místech, relativnì hodnì vzdálených od pozorovatele, tyto ru¹ící artefakty bì¾nì zobrazují.

\end{itemize}
\noindent 

Následující dvì èásti popisují metody, jak tyto dvì vady dostateènì eliminovat.
\subsection{Antialiasing}
\label{sec040202}\hypertarget{sec040202}{}%

{\em{Antialiasing}} je obecným pojmem pro odstraòování {\em{aliasu}}. Nejbì¾nìj¹í cestou je odstranìní pøíli¹ vysokých frekvencí nìkterým z~vysokofrekvenèních filtrù. Tím v¹ak dojde k~jistému rozostøení obrazu. Mo¾ností je vyu¾ít metodu {\em{Multisamplingu}}, která je implementována pøímo v~{\em{OpenGL API}}. Ta se hodí k~odstranìní zubatých hran a efekt moiré doká¾e odsunout do vy¹¹ích frekvencí. Vyu¾ívá pøi tom akumulaèní pamì». Obraz je tak vykreslen nìkolikrát, pøièem¾ se pohled po ka¾dém vykreslení zmìní o~vzdálenost men¹í ne¾ jeden pixel. Výsledné obrazy jsou seèteny a zprùmìrovány. Tato metoda je sice kvùli nìkolikanásobnému vykreslování dosti nároèná na výkon, av¹ak je jednoduché ji pomocí {\em{OpenGL}} implementovat a rovnì¾ ji podporuje vìt¹ina dne¹ních grafických karet.
\subsection{Filtrování textur a mipmapping}
\label{sec040203}\hypertarget{sec040203}{}%

Velkým problémem je i vznik {\em{aliasu}} na texturách. V~prostorových scénách toti¾ vìt¹inou jednomu pixelu neodpovídá právì jeden {\em{texel}}\label{fn03030301}\begingroup\catcode`\#=12\footnote{
{\em{Texel}} neboli {\em{texture element}} je, obdobnì jako pixel u~obrazu, základní jednotkou textury.
}\endgroup\docbooktolatexmakefootnoteref{fn03030301}. Filtrování textur provede smíchání více texelù na jeden pixel. Bez pou¾ití filtrování je pixelu pøiøazena barva jen jednoho texelu a tak pøi pohybu dochází k~nepøíjemnému mihotání a vzniku {\em{jaggies}}. Filtrování textur je výkonovì levnìj¹í operací ne¾ pou¾ití {\em{antialiasingu}}. Pro dal¹í zrychlení lze zmen¹ení textury pøedpoèítat. Slou¾í k~tomu technika {\em{mipmappingu}}, která pøedem ke ka¾dé textuøe vytvoøí její zmen¹ené ji¾ filtrované verze. Takto je vytvoøeno nìkolik textur od pùvodního rozli¹ení a¾ po velikost jedna. Pøi následném mapování textury se dle úrovnì detailù zvolí pøíslu¹ná {\em{MIP map}} úroveò. {\em{OpenGL}} podporuje pouze textury o~velikosti mocniny èísla 2. To ov¹em znamená, ¾e pro ka¾dou {\em{MIP map}} texturu je zapotøebí ètyønásobek pamìti oproti pùvodní textuøe. Nároènost na pamì» je i pøes èásteèné rozmazání textury vyvá¾ena mnohem lep¹ím zobrazením. Nespornou výhodou je také vý¹e zmiòované u¹etøení výpoèetního èasu. Není toti¾ zapotøebí pøi ka¾dém nanesení textury provádìt filtrování na textuøe s~pùvodním rozli¹ením.

% ------------------------   
% Section 
\section{Øádkové vyplòování se seznamem aktivních hran}
\label{sec0403}\hypertarget{sec0403}{}%
\subsection{Specifikace po¾adavkù}
\label{sec040301}\hypertarget{sec040301}{}%

Nejdùle¾itìj¹í èástí aplikace bylo bezesporu najít a implementovat vhodný algoritmus pro vyplnìní oblastí. Jeho modifikovaná podoba by byla následnì pou¾ita pøi vyplòování místnosti ve tvaru libovolného polygonu dílci plovoucí podlahy ve tvarech libovolných obdélníkù. Algoritmus musel splòovat následující podmínky:

\begin{itemize}
%--- Item
\item 
{\bfseries{Nezávislost na typu polygonu}} --- algoritmus by nemìl rozli¹ovat, zda je vyplòovaný objekt polygonem konvexním èi konkávním.

%--- Item
\item 
{\bfseries{Geometricky urèené hranice}} --- základní podmínkou bylo také vybrat algoritmus, který vyplòuje oblast zadanou sérií propojených bodù.

%--- Item
\item 
{\bfseries{Vyplòování v~libovolném úhlu}} --- je nezbytné, aby bylo mo¾né provádìt vyplòování v~obecném úhlu, nebo» v~aplikaci bude vìt¹inou úhel vyplòování shodný s~jednou z~hran polygonu.

\end{itemize}
\noindent 

V¹echny tyto podmínky nejlépe splòuje algoritmus {\em{øádkového vyplòování se seznamem aktivních hran}}. Aby navíc fungoval v~obecném úhlu, pou¾ijeme postup, jen¾ je podobný ¹rafování v~obecném úhlu.\docbooktolatexcite{mpg}{}
\subsection{Popis algoritmu}
\label{sec040302}\hypertarget{sec040302}{}%

Je nutné zavést celkem tøi datové struktury. Základním datovým typem je {\em{hrana}}. O~ka¾dé hranì se uchovávají tøi atributy: souøadnice {\em{y}} koncového bodu, souøadnice {\em{x}} prùseèíku s~aktuálním øádkem a pøírùstek {\em{x}} pøi pøechodu na nový øádek. Nìkdy se místo souøadnice {\em{y}} koncového bodu pou¾ívá poèet zbývajících øádkù. V~aplikaci {\em{FloorPlanner}} v¹ak nebudou souøadnice {\em{y}} celoèíselné hodnoty, a proto by kvùli nepøesnostem ve výpoètech mohlo docházet k~chybám.

Druhou datovou strukturou je {\em{tabulka hran}} obsahující na zaèátku v¹echny nevodorovné hrany polygonu. Vodorovné hrany jsou z~výpoètu vylouèeny, nebo» mají s~øádkem nekoneènì mnoho prùseèíkù a pro výpoèet nejsou kvùli øádkovému stylu vyplòování dùle¾ité. V¹echny hrany v~tabulce hran jsou orientovány smìrem dolù a jsou sestupnì uspoøádány podle souøadnice {\em{y}} poèáteèního bodu.

Poslední nutnou datovou strukturou je {\em{seznam aktivních hran}}. Pøi pøechodu na nový øádek jsou v¹echny hrany s~poèátkem na aktuálním øádku pøesunuty z~tabulky hran do seznamu aktivních hran. Seznam se udr¾uje vzestupnì seøazený podle aktuální souøadnice {\em{x}} ka¾dé z~hran. V~tomto okam¾iku je mo¾né vykreslit úseky mezi lichými a sudými hranami v~seznamu. Pøed pøechodem na nový øádek je u~v¹ech hran aktualizována hodnota souøadnice {\em{x}} prùseèíku. Zároveò jsou hrany, mající souøadnici {\em{y}} koncového bodu shodnou se souøadnicí {\em{y}} aktuálního øádku, ze seznamu aktivních hran vyøazeny.

Algoritmus zaèíná naplnìním a seøazením tabulky hran, pøièem¾ je její první, a tím pádem i nejvìt¹í, souøadnice {\em{y}} pou¾ita pro nastavení aktuálního øádku. Pøechody na nový øádek jsou poté opakovány, dokud se tabulka hran i seznam aktivních hran úplnì nevyprázdní.

% -------------------------------------------------------------
% Chapter FloorPlanner 
% ------------------------------------------------------------- 	
\chapter{FloorPlanner}
\label{ch05}\hypertarget{ch05}{}%

Aplikace {\em{FloorPlanner}} vznikla jako stì¾ejní èást této bakaláøské práce. Øadí se do kategorie jednoduchých objektovì orientovaných {\em{AEC/CAD}} aplikací. Byla primárnì vytvoøena pro vizualizaci a kalkulaci plovoucích podlah. I~pøes její souèasnou funkènost a vyu¾itelnost v~praxi je mo¾ný, a zároveò dùle¾itý, její dal¹í vývoj. Cesty, kterými by se mohl vývoj ubírat, jsou naznaèeny na konci této kapitoly.

% ------------------------   
% Section 
\section{U¾ivatelské prostøedí}
\label{sec0501}\hypertarget{sec0501}{}%

Aplikace je navr¾ena tak, aby u¾ivatel mohl jednoduchými a intuitivními kroky vytvoøit témìø libovolnou místnost. Do vytvoøené místnosti pak \glqq polo¾il\textquotedblleft{} jednu z~nabízených podlah, poupravil pár parametrù pokládky a nakonec se pro¹el v~hotové místnosti. U¾ivatelské prostøedí se skládá ze dvou èástí. V~pravé èásti se nacházejí ve¹keré ovládací prvky. Levá èást rùznými zpùsoby zobrazuje grafická data.

Ovládací prvky byly vytvoøeny platformovì nezávislou knihovnou {\em{GLUI}}. Jsou rozdìleny do nìkolika rozvinovacích panelù. Pomocí panelu {\em{Wall editing}} lze pøidávat, odebírat i editovat zdi. Panel {\em{Floor}} se stará o~nastavení a zobrazení podlahy. Panel {\em{Windows/Doors editing}} vytváøí a odstraòuje otvory ve zdech pro okna a dveøe. V~panelu {\em{Options}} se nalézají ostatní nastavení, napøíklad pro zmìnu svìtla èi kvality zobrazení. Pravá èást mimo jiné obsahuje i tlaèítka pro volbu jednoho ze dvou módù. Zmìnou módu se mìní zpùsob zobrazování grafických dat v~levé èásti.

Dvojrozmìrný mód zobrazuje ortografický náhled pùdorysu místnosti a je ideální pro editaci. Je navr¾en jako nápodoba rýsovacího prkna. Pozadí tvoøí pomocná møí¾ka, na ní¾ se místnost jednodu¹e kreslí pomocí my¹i. Pro vytváøení zdí pod úhlem 90° a jeho násobku je implementováno, pro tuto èinnost standardní, kreslení se stisknutou klávesou {\bfseries{Shift}}. Zobrazují se zde i okna s~rùznými doplòkovými informacemi. Po dokonèení místnosti a zobrazení podlahy je v~tomto módu nejlépe vidìt rozlo¾ení podlahových dílcù.

Druhou mo¾ností je trojrozmìrný mód plnící presentaèní a vizualizaèní úlohu. Pro pohyb je pou¾it pohledový model první osoby. Ve¹keré zdi jsou viditelné jen z~vnitøní strany místnosti. Díky tomu je podlaha interiéru vidìt i v~pøípadì, ¾e je pozorovatel vnì místnosti. V~pravé èásti okna aplikace je mo¾né nastavit nìkolik úrovní kvality zobrazení tohoto trojrozmìrného módu vèetnì typu osvìtlení.

% figure ------------------------------------------------------
\begin{figure}[hbt]
\hypertarget{pic050101}{}%
\begin{center}

{{\includegraphics[]{fp01}}\hypertarget{id381055}{}%
\label{id381055}
}
{{\caption[{Ukázka u¾ivatelského prostøedí aplikace FloorPlanner.}]{{{Ukázka u¾ivatelského prostøedí aplikace FloorPlanner.}}}\label{pic050101}}}
\end{center}
\end{figure}

% ------------------------   
% Section 
\section{Logická stavba programu}
\label{sec0502}\hypertarget{sec0502}{}%

Aplikace byla naprogramována v~jazyce {\em{C++}}. Tento jazyk byl vybrán pro snadnou implementovatelnost {\em{OpenGL API}}. Pro vytvoøení objektovì orientované {\em{AEC/CAD}} aplikace byl i v~programování ve vìt¹inì pøípadù pou¾it objektovì orientovaný pøístup. Hlavní tøídou aplikace je tøída {\em{Room}} obsahující ve¹kerá grafická data o~místnosti. Tato tøída proto disponuje kontejnerem s~instancemi tøídy {\em{Wall}} pro zdi místnosti, instanci tøídy {\em{Floor}} pro podlahu a instanci tøídy {\em{Light}} pro osvìtlení. Zároveò se stará o~vzájemnou interakci komponent místnosti. Tøída {\em{Wall}}, kromì grafických dat o~samotné zdi, obsahuje také kontejner s~instancemi tøídy {\em{Windows}} pro výøezy ve zdech. Ke kalkulaci materiálu slou¾í tøída {\em{MaterialCalculation}}. Uvnitø dochází také k~výpoètu grafických dat podlahových dílcù pro místnosti typu {\em{Room}}. Kromì toho jsou souèástí aplikace i dal¹í dvì dùle¾ité tøídy mající na starost zobrazení scény a u¾ivatelské vstupy. Tøída {\em{Viewport2D}} je urèena pro vykreslování dat ve dvojrozmìrném módu. O¹etøuje vstupy z~klávesnice i my¹i. Vykresluje møí¾ku pro informace o~právì vykonávané èinnosti a hlavnì pùdorysná data instancí tøíd {\em{Room}} a {\em{MaterialCalculation}}. V~pøípadì výbìru nìjaké akce èi výskytu chyby zobrazí podrobnìj¹í informace. Naproti tomu jsou tøídou {\em{Viewport3D}} zobrazována trojrozmìrná data.

% ------------------------   
% Section 
\section{Implementované knihovny}
\label{sec0503}\hypertarget{sec0503}{}%

\subsection{OpenGL}
\label{sec050301}\hypertarget{sec050301}{}%

{\em{OpenGL}} (Open Graphics Library) je víceplatformní rozhraní pro tvorbu pøedev¹ím trojrozmìrné grafiky, je¾ je renderována v~reálném èase. I~kdy¾ je {\em{OpenGL}} nejèastìji interpretováno jazyky {\em{C}}, nebo {\em{C++}}, existují implementace knihovny pro vìt¹inu bì¾ných programovacích jazykù. Stejnì tak je implementováno na vìt¹inì dne¹ních platforem. Pokud ne hardwarovì, tak alespoò pomocí nìkteré ze softwarových implementací. Vzniklo roku 1992 pod zá¹titou konsorcia {\em{OpenGL ARB}}\label{fn05030101}\begingroup\catcode`\#=12\footnote{
OpenGL Architecture Review Board byla skupina spoleèností s~cílem vytvoøit jednotné spoleèné API.
}\endgroup\docbooktolatexmakefootnoteref{fn05030101}. Od té doby vzniklo ji¾ sedm revizí, z~nich¾ poslední verze je {\em{OpenGL 2.1}}. Pomocí asi 250 pøíkazù pro nastavení a definici objektù a scény lze vytváøet ¹iroké spektrum grafických aplikací. Ve¹keré objekty jsou vykreslovány pomocí základních primitiv, jako jsou body, úseèky, trojúhelníky èi polygony. {\em{OpenGL}} se chová jako stavový automat. Poskytuje proto celou øadu pøíkazù pro nastavení stavových promìnných, které definují vlastnosti, je¾ jsou na objekty aplikovány bìhem zpracování v~{\em{OpenGL pipeline}}\label{fn05030102}\begingroup\catcode`\#=12\footnote{
Posloupnost vykonávaných operací pøi zpracování grafických dat v~OpenGL.
}\endgroup\docbooktolatexmakefootnoteref{fn05030102}.
\subsection{GLU}
\label{sec050302}\hypertarget{sec050302}{}%

Knihovna utilit {\em{GLU}} (OpenGL Utility Library) je jednou z~nástavbových knihoven {\em{OpenGL}}. Je standardnì obsa¾ena v~ka¾dé implementaci {\em{OpenGL}}. Obsahuje sadu pøíkazù pro zjednodu¹ení programování nìkterých procedur oproti klasickému {\em{OpenGL}}. Nabízí napøíklad nástroje pro teselaci polygonù, generování MIP map, tvorbu NURBS køivek a ploch nebo jednodu¹¹í nastavení pohledové matice. Pøidává taky nìkterá nová primitiva, tzv. kvadriky, pro tvorbu koulí, válcù a diskù.
\subsection{GLUT}
\label{sec050303}\hypertarget{sec050303}{}%

{\em{GLUT}} (OpenGL Utility Toolkit) je dal¹í sadou nástrojù pro roz¹íøení {\em{OpenGL API}}. Tyto jsou v¹ak zamìøeny zejména na jednoduché vstupnì/výstupní operace s~operaèním systémem, které by byly bez pou¾ití této knihovny komplikované. Pùvodnì byl vytvoøen pro {\em{X Window}} systémy. Pozdìji byl pøenesen i na platformy {\em{Windows}} a {\em{Mac}}. Umo¾òuje jednoduchou tvorbu a ovládání oken, zpìtná volání pøi vstupech z~klávesnice, my¹i i jiných zaøízení a také tvorbu devíti trojrozmìrných primitiv. Pøiná¹í i jednoduchou mo¾nost tvorby {\em{GUI}}\label{fn05030301}\begingroup\catcode`\#=12\footnote{
Graphical User Interface neboli grafické u¾ivatelské rozhraní.
}\endgroup\docbooktolatexmakefootnoteref{fn05030301}, které je v¹ak omezeno jen na vyskakovací menu.
\subsection{GLUI}
\label{sec050304}\hypertarget{sec050304}{}%

Roz¹iøující, i kdy¾ ne zcela plnohodnotné øe¹ení tvorby grafického u¾ivatelského rozhraní, nabízí knihovna GLUI (OpenGL User Interface Library). Jde o~nadstavbu knihovny {\em{GLUT}}. Tato víceplatformní knihovna nabízí nìkolik základních prvkù pro tvorbu jednoduchého {\em{GUI}}. Do prvkù, jako jsou rozvinovací èi klasické panely, lze umístit obyèejná nebo za¹krtávací tlaèítka, tlaèítka pøedvolby, textová pole nebo tøeba obyèejné oddìlovaèe. Slo¾itìj¹í prvky pro tvorbu pokroèilých grafických rozhraní bohu¾el chybí. Dostateèným plusem je ov¹em jednoduchost a z~toho i èásteènì vyplývající rychlost. ©kála ovládacích prvkù je pro aplikaci {\em{FloorPlanner}} postaèující.
\subsection{Texture Loader}
\label{sec050305}\hypertarget{sec050305}{}%

{\em{Texture Loader}} v~souèasné verzi 1.4 je knihovna vytvoøená {\em{Chrisem Leathley}} pro zjednodu¹ené pou¾ití textur ve {\em{Win32 OpenGL}} aplikacích. Jedná se o~velmi jednoduchý, ale pøesto silný nástroj pro nahrání, ulo¾ení i pou¾ití textur v~{\em{OpenGL}} aplikacích. Podporuje textury v~{\em{BMP}}, {\em{GIF}}, {\em{JPG}} i {\em{TGA}} formátu, které mù¾e nahrát z~disku, RAM nebo Internetu. Následnì se dají zobrazit za pou¾ití bilineárního, nebo trilineárního filtrování. Podporuje generování MIP map a textur s~polovièním rozli¹ením pro systémy se star¹ími grafickými kartami.

% ------------------------   
% Section 
\section{Vhodná roz¹íøení aplikace}
\label{sec0504}\hypertarget{sec0504}{}%

Aplikace se nyní nachází ve funkèní stádiu. Je plnì pou¾itelná v~praxi. Mo¾ností pro roz¹íøení aplikace je v¹ak stále hodnì. Vývoj aplikace bude tedy i nadále pokraèovat. Následuje výèet nìkolika vlastností, které by se mohly v~budoucnu stát souèástí aplikace {\em{FloorPlanner}}.

\begin{itemize}
%--- Item
\item 
Import nových vzorù pro aktualizaci seznamu podlah vèetnì jejich textur a velikosti.

%--- Item
\item 
Pokroèilé GUI se zobrazením hierarchické struktury objektù a náhledy podlah.

%--- Item
\item 
Roz¹íøení o~algoritmicky jednodu¹eji implementovatelné druhy podlah jako jsou koberce, linolea, podlahové ètverce nebo rùzné druhy podkladových materiálù.

%--- Item
\item 
Mo¾nost ulo¾ení nebo nahrání projektu, stejnì jako import do nìkterého z~bì¾nì pou¾ívaných formátù.

%--- Item
\item 
Import GDL objektù.

%--- Item
\item 
Nìkteré pokroèilej¹í svìtelné efekty jako jsou odrazy nebo stíny.

%--- Item
\item 
Vizualizace mozaikovitého vyskládávání podlah.

%--- Item
\item 
Kompletní výpis v¹ech materiálù formátovaný pro tisk.

\end{itemize}
\noindent 

% -------------------------------------------------------------
% Chapter Implementace algoritmù v aplikaci FloorPlanner 
% ------------------------------------------------------------- 	
\chapter{Implementace algoritmù v~aplikaci FloorPlanner}
\label{ch06}\hypertarget{ch06}{}%

% ------------------------   
% Section 
\section{Øazení zdí v~místnosti}
\label{sec0601}\hypertarget{sec0601}{}%

Tvorba místností je v~aplikaci {\em{FloorPlanner}} realizována postupným kreslením a editací zdí v~dvojrozmìrném módu. Aby mohlo být v~aplikaci jednodu¹e implementováno mizení zdí, které by bránily pohledu u¾ivatele do místnosti, musí být v¹echny zdi orientované stejným smìrem. Mizení lze pak jednodu¹e zajistit odstøelem pøedních èi zadních stran polygonù. Pro pozdìj¹í zpracování, jako je teselace nebo vyplnìní podlahovými dílci, je také nutné, aby na sebe jednotlivé zdi navazovaly a tvoøily polygon bez vzájemného køí¾ení hran.

Spojování i otáèení zdí je implementováno ve tøídì {\texttt{{Room}}}. Ta má jako svùj atribut kontejner {\texttt{{walls}}} obsahující v¹echny zdi tøídy {\texttt{{Wall}}} a dvojrozmìrné pole {\texttt{{vertices}}}. Toto pole obsahuje setøídìné souøadnice shodnì orientovaných zdí kontejneru {\texttt{{walls}}}.

\begin{Verbatim}[fontsize=\small]
class Room
{
private:
	GLfloat** vertices;    /*setridene pole s krajnimi body zdi vectoru 
	                         walls*/
	vector<Wall> walls;    /*kontejner setridenych zdi*/
	...
	...
public:
	void addWall(Wall &wall);        /*pridani nove zdi zadane parametrem*/
	void removeWall(GLuint id);      /*odstraneni zdi*/
	void rotateWall(GLuint id);      /*otaceni zdi*/
	void editWallPosition(GLuint id, /*uprava souradnic krajnich bodu zdi*/
		GLuint index, GLfloat value);
		
	GLfloat *nearPoint(GLfloat *point); /*pokud najde ve vertices bod
	                                      blizky point, vrati jej*/
 	...
 	...
};
\end{Verbatim}

Samotná tøída {\texttt{{Wall}}} obsahuje jako své atributy dvì souøadnice dvou krajních bodù zdi. Dal¹ím atributem dùle¾itým pro tøídìní je pole {\texttt{{vertices2d}}}, obsahující souøadnice dvou bodù. Ty jsou pou¾ity ve dvojrozmìrném módu, kdy je zeï vykreslena jako ètyøúhelník. Souøadnice jsou pøi ka¾dé zmìnì u~vrcholu pøepoèítány.

\begin{Verbatim}[fontsize=\small]
class Wall 
{
private:
	GLfloat position[4];    /*krajni body zdi*/
	GLfloat vertices2d[4];  /*dva body pro 2D zobrazeni zdi jako 
	                          ctyruhelniku*/
	...
	...
public:
	void switchPoints();    /*otoci zed o 180° kolem sveho stredu*/
	...
	...
};
\end{Verbatim}

\subsection{Vkládání nových zdí}
\label{sec060101}\hypertarget{sec060101}{}%

Vkládání a následné øazení je provádìno v~nìkolika krocích. Nejprve tøída {\texttt{{Viewport2D}}}, starající se o~projekci a u¾ivatelské vstupy dvojrozmìrného módu, zpracuje vstup u¾ivatele, jen¾ kreslí novou zeï. Pomocí metody {\texttt{{nearPoint()}}} je zji¹tìno, zda v~blízkosti u¾ivatelem zadaných bodù ji¾ nele¾í jiný bod. V~pøípadì nálezu je u¾ivatelem zadaný bod posunut do nalezeného bodu a zdi jsou napojeny.

Pøi ka¾dé takto vlo¾ené zdi je pole {\texttt{{vertices}}} i odpovídající zdi v~kontejneru {\texttt{{walls}}} setøídìno. To probíhá ve tøech krocích pomocí tøí metod tøídy {\texttt{{Room}}}. Pøidání zdi se realizuje voláním metody {\texttt{{addWall()}}} s~parametrem vkládané zdi. Prohledáním pole {\texttt{{vertices}}} je následnì zji¹tìno, zda ji¾ existuje zeï, která by se dala s~novì vkládanou zdí propojit. Pokud není propojení nalezeno, je nová zeï vlo¾ena na konec pole {\texttt{{vertices}}} i kontejneru {\texttt{{walls}}}. V~opaèném pøípadì je volána metoda {\texttt{{findSecondConnection()}}}. Zatímco metoda {\texttt{{addWall()}}} zjistí pouze jedno propojení, metoda {\texttt{{findSecondConnection()}}} zkoumá, zda nelze propojit i druhý konec novì vkládané zdi. Pokud tento konec není nijak propojen, dojde nejprve v~pøípadì rozdílné orientace pùvodní a nové zdi k~otoèení nové zdi metodou {\texttt{{rotateWall()}}}. Následnì je pak nová zeï vlo¾ena jak do pole {\texttt{{vertices}}}, tak i do kontejneru {\texttt{{walls}}} pøed, resp. za zeï nalezenou v~metodì {\texttt{{addWall()}}}. Je tak vytvoøen {\em{díl propojených zdí}}. Pøíklad je zobrazen na obrázku 6.1.

% figure ------------------------------------------------------
\begin{figure}[hbt]
\hypertarget{pic06010101}{}%
\begin{center}

{{\includegraphics[]{01}}\hypertarget{id383808}{}%
\label{id383808}
}
{{\caption[{Aplikace seøazení pole {\texttt{{vertices}}} v~metodì {\texttt{{findSecondConnection()}}}.}]{{{Aplikace seøazení pole {\texttt{{vertices}}} v~metodì {\texttt{{findSecondConnection()}}}.}}}\label{pic06010101}}}
\end{center}
\end{figure}

Metoda {\texttt{{findSecondConnection()}}} také o¹etøuje uzavøení polygonu místnosti poslední zdí. Testování uzavøenosti kontroluje, zda je celé pole tvoøeno jedním {\em{dílem propojených zdí}} a zda se poslední bod rovná prvnímu. Tímto testováním je zamezeno provádìní teselace a kalkulace v~místnostech s~otvorem nebo sloupem uvnitø. Poslední metodou tøídy {\texttt{{Room}}} pro øazení hran je {\texttt{{sortWalls()}}}. Ta je volána v~metodì {\texttt{{findSecondConnection()}}} pøi nalezení shody nepropojeného bodu vkládané zdi s~nìkterým bodem z~pole {\texttt{{vertices}}}. Metoda {\texttt{{sortWalls()}}} zabezpeèí pøípadné otoèení zdí a setøídìní. Otáèení zdí je zde o~nìco slo¾itìj¹í. Pokud mají zdi, je¾ mají být s~vkládanou zdí propojeny, opaènou orientaci, je tøeba jednu z~nich otoèit. Výslednou orientaci v~tomto pøípadì urèuje novì vkládaná zeï. Otáèí se v¹ak nejen zeï pøímo spojená s~vkládanou zdí, ale celý {\em{díl propojených zdí}}. To znamená, ¾e v¹echny zdi v~tomto dílu musí být otoèeny a pøeskládány v~opaèném poøadí. Pole {\texttt{{vertices}}} je pak setøídìno následovnì: Nejdøíve jsou vlo¾eny v¹echny zdi novì vzniklého {\em{dílu propojených zdí}} ve správném poøadí i se správnou orientací. Pak následují v¹echny ostatní zdi ve stejném poøadí, jako byly ulo¾eny v~poli {\texttt{{vertices}}} pøed setøídìním. Pøíklad tøídìní v~metodì {\texttt{{sortWalls()}}} je znázornìn na obrázku 6.2.

% figure ------------------------------------------------------
\begin{figure}[hbt]
\hypertarget{pic06010102}{}%
\begin{center}

{{\includegraphics[]{02}}\hypertarget{id383885}{}%
\label{id383885}
}
{{\caption[{Aplikace seøazení pole {\texttt{{vertices}}} v~metodì {\texttt{{sortWalls()}}}.}]{{{Aplikace seøazení pole {\texttt{{vertices}}} v~metodì {\texttt{{sortWalls()}}}.}}}\label{pic06010102}}}
\end{center}
\end{figure}

\subsection{Ostatní operace se zdmi}
\label{sec060102}\hypertarget{sec060102}{}%

Kromì vkládání zdí jsou v~aplikaci FloorPlanner implementovány i jiné operaci se zdmi. Seøadìní navazujích zdí musí být zachováno. V~následujících øádcích jsou popsány a vysvìtleny záludnosti, na které musel být pøi implementaci tìchto jednotlivých operací brán zøetel.

\begin{itemize}
%--- Item
\item 
{\bfseries{Odstraòování zdi}} pøedstavuje operaci zmen¹ení kontejneru walls a pole vertices o~právì oznaèenou zeï. Dùle¾ité je o¹etøit pøípad, kdy je zeï uvnitø uzavøené smyèky. V~tomto pøípadì je nutné celou tuto smyèku pøeuspoøádat. Pøi ka¾dém odstranìní zdi je nutné provést kontrolu uzavøenosti polygonu.

%--- Item
\item 
Pøi {\bfseries{pøevrácení zdi}} je nutné otoèit i v¹echny navazující zdi. Ty jsou následnì uspoøádány v~opaèném poøadí.

%--- Item
\item 
{\bfseries{Editace krajních bodù zdi}} upráví v¾dy jednu ze souøadnic zdi. Spolu s~ní je tøeba upravit i souøadnici zdi, která v~tomto bodì navazuje.

\end{itemize}
\noindent 

% ------------------------   
% Section 
\section{Výbìr objektu}
\label{sec0602}\hypertarget{sec0602}{}%

{\em{OpenGL}} nabízí kromì módu pro vykreslení objektù na obrazovku i jiné módy. Díky nim lze provádìt výbìr objektù nebo pou¾ívat zpìtnou vazbu. V~aplikaci {\em{FloorPlanner}} se objekty nejen vykreslují, ale je s~nimi i manipulováno. Pro tento úèel nabízí {\em{OpenGL}} sadu funkcí a procedur. Ty jsou v¹ak navr¾eny pøedev¹ím pro pou¾ití v~trojrozmìrné scénì. Vzhledem k~tomu, ¾e výbìr probíhá v~aplikaci {\em{FloorPlanner}} ve dvojrozmìrné ortografické projekci, bylo by pou¾ití tohoto aparátu zbyteènì slo¾ité. Namísto nìj lze pou¾ít speciální vykreslení do nepou¾ívaného {\em{color-bufferu}}. Objekty jsou jednotlivì vykresleny unikátní barvou. Následnì jsou z~{\em{color-bufferu}} ètena pixelová data, je¾ jednoznaènì identifikují vybíraný objekt. Tento postup lze vyu¾ít pouze pro výbìr objektù, které jsou nejblí¾e pozorovateli. Zároveò je tento algoritmus nevhodný pro scény s~pøíli¹ velkým poètem objektù. Pro pou¾ití v~aplikaci {\em{FloorPlanner}} je ov¹em ideální.
\subsection{Datové struktury}
\label{sec060201}\hypertarget{sec060201}{}%

V~této èásti jsou popsány datové struktury potøebné pro výbìr objektù. Celý proces výbìru je realizován instancí tøídy {\texttt{{Viewport2D}}}.

\begin{Verbatim}[fontsize=\small]
Viewport2D vp2d;  /*instance pro dvojrozmìrný mód*/
Room room;        /*instance representující místnost*/
\end{Verbatim}

Ka¾dému objektu scény pøidìlí {\texttt{{vp2d}}} pomocí tøídy {\texttt{{Identifier}}} unikátní identifikátor.

\begin{Verbatim}[fontsize=\small]
class Identifier
{
private:
	GLuint current;
public:
	Identifier(void):current(1){};
	GLuint generate() { return current++; };
};
\end{Verbatim}

Ka¾dý objekt si uchovává svùj identifikátor. Zároveò jsou v¹echny identifikátory ulo¾eny v~asociativním kontejneru spolu s~údajem o~typu objektu.

\begin{Verbatim}[fontsize=\small]
map<unsigned int, unsigned short> identifiers_of_objects;
\end{Verbatim}

\subsection{Implementace výbìru objektu}
\label{sec060202}\hypertarget{sec060202}{}%

Kliknutím my¹i do prostoru rýsovacího plátna bez vybrané akce je v~tøídì {\texttt{{Viewport2D}}} aktivován mód výbìru. Souøadnice kliknutí jsou ulo¾eny. Následnì je celá scéna vykreslena do zadního bufferu.

Nejprve je nutné vyèistit {\em{color-buffer}} èernou barvou a vypnout výpoèet osvìtlení.

\begin{Verbatim}[fontsize=\small]
glClearColor(0.0, 0.0, 0.0, 0.0);  /*nastaveni barvy color-bufferu na
                                     cernou*/
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glDisable(GL_LIGHTING);            /*vypnuti osvetleni*/
\end{Verbatim}

Projekèní matice je nastavena shodnì jako v~pøípadì klasického vykreslení scény ve dvojrozmìrném re¾imu.

\begin{Verbatim}[fontsize=\small]
glMatrixMode(GL_PROJECTION); /*mod projekcni matice*/
vp2d.projection();           /*nastaveni projekce*/
glMatrixMode(GL_MODELVIEW);  /*mod modelovaci matice*/
glLoadIdentity();            /*nahrani jednotkove matice*/
\end{Verbatim}

Následuje vykreslení celé scény v~módu výbìru. Identifikátor ka¾dého objektu je symetricky pøeveden na barvu tak, aby ka¾dá barva jednoznaènì urèovala jeden objekt scény. Jednotlivé objekty jsou pak touto barvou vykresleny.

\begin{Verbatim}[fontsize=\small]
room.displaySelection();     /*zobrazeni objektu specialne pro vyber*/
\end{Verbatim}

Pøed ètením pixelových dat je zapotøebí dokonèit v¹echny operace provádìné {\em{OpenGL}}. To lze vynutit funkcí {\texttt{{glFlush()}}}.

\begin{Verbatim}[fontsize=\small]
glFlush();                   /*vynucene dokonceni vsech OpenGL operaci*/
\end{Verbatim}

Metoda {\texttt{{selectObject()}}} se postará o~výbìr objektu v~místnosti zadané parametrem. Vzhledem k~vìt¹ímu mno¾ství operací je tato metoda rozepsána ní¾e.

\begin{Verbatim}[fontsize=\small]
vp2d.selectObject(&room);    /*cteni pixelovych dat a vyber objektu*/
\end{Verbatim}

Díky absenci volání funkce {\texttt{{glutSwapBuffers()}}} se celá procedura nezobrazí na obrazovce.

V~metodì {\texttt{{selectObject()}}} jsou pou¾ity døíve ulo¾ené souøadnice kliknutí. V~kódu jsou reprezentovány polem {\texttt{{mouse\_click[]}}}. Pro ulo¾ení vlastností pixelu, na který bylo kliknuto, poslou¾í ukazatel {\texttt{{*pixel}}}.

\begin{Verbatim}[fontsize=\small]
GLubyte *pixel = new GLubyte[3];
\end{Verbatim}

Funkce {\texttt{{glReadBuffer()}}} nastaví zadní buffer pomocí parametru {\texttt{{GL\_BACK}}} pro ètení.

\begin{Verbatim}[fontsize=\small]
glReadBuffer(GL_BACK);
\end{Verbatim}

Pro ètení pixelových dat z~frame bufferu slou¾í funkce {\texttt{{glReadPixels()}}}. V~tomto pøípadì je èten pouze jeden pixel, a to ten, na nìj¾ bylo kliknuto. Jeho barva je ulo¾ena do pole daného ukazatelem {\texttt{{*pixel}}}. Pou¾itím konstant {\texttt{{GL\_RGB}}} a {\texttt{{GL\_UNSIGNED\_BYTE}}} je èervená, zelená i modrá slo¾ka barvy ulo¾ena jako osmibitové èíslo bez znaménka.

\begin{Verbatim}[fontsize=\small]
glReadPixels(
    mouse_click[0],window[1]-mouse_click[1], /*souradnice ctene oblasti*/
    1,1,                      /*velikost ctene oblasti*/
    GL_RGB, GL_UNSIGNED_BYTE, /*parametry ulozeni oblasti*/
    pixel);               /*ukazatel na pole pro ulozeni pixelovych dat*/
\end{Verbatim}

Barvu lze nyní jednodu¹e pomocí bitových posunù a bitového souètu zpìtnì pøevést na identifikátor.

\begin{Verbatim}[fontsize=\small]
GLuint r,g,id;
r = pixel[0] << 16;
g = pixel[1] << 8;
id = pixel[2];
id = r | g | id;
\end{Verbatim}

Nakonec je z~asociativního pole {\texttt{{identifiers\_of\_objects}}} získána informace o~typu objektu s~tímto identifikátorem. Objekt je vyhledán v~instanci tøídy {\texttt{{Room}}}, oznaèen a pøipraven pro editaci a jiné operace.

% ------------------------   
% Section 
\section{Antialiasing}
\label{sec0603}\hypertarget{sec0603}{}%

Vykreslování scén bez pou¾ití nìjaké formy vyhlazení vytváøí nepøíjemné artefakty a pøíli¹ ostré a zubaté pøechody ({\em{jaggies}}). {\em{OpenGL}} nabízí relativnì kvalitní nástroje pro vyhlazování bodù, úseèek, polygonù i celé scény.
\subsection{Vyhlazování úseèek}
\label{sec060301}\hypertarget{sec060301}{}%

Dvojrozmìrný re¾im aplikace {\em{FloorPlanner}} vykresluje pouze úseèky a polygony bez pou¾ití textur èi osvìtlení. Okraje polygonù jsou zde v¾dy obta¾eny úseèkami, tudí¾ \glqq zubatost\textquotedblleft{} polygonù není potøeba øe¹it. Úseèky v¹ak èasto trpí dosti viditelným {\em{aliasem}}, a proto je na nì pou¾it jednoduchý antialiasing úseèek v~{\em{OpenGL}}.

Nejprve je nutné pomocí funkce {\texttt{{glEnable()}}} povolit vyhlazování úseèek a míchání barev.

\begin{Verbatim}[fontsize=\small]
glEnable(GL_LINE_SMOOTH);
glEnable(GL_BLEND);
\end{Verbatim}

Poté jsou nastaveny faktory míchání barev.

\begin{Verbatim}[fontsize=\small]
glBlendFunc(GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA);
\end{Verbatim}

Posledním nastavením je funkce {\texttt{{glHint()}}}. Ta nastaví {\em{OpenGL}} tak, ¾e pokud to bude implementací povoleno, pou¾ije pro vyhlazování nejkvalitnìj¹í metodu.
\subsection{Vyhlazování scény}
\label{sec060302}\hypertarget{sec060302}{}%

{\em{OpenGL}} vyu¾ívá pro vyhlazování celé scény metodu {\em{multisamplingu}}\docbooktolatexcite{OpenGL}{}. Celá scéna je nìkolikrát vykreslena s~minimálním posunem do akumulaèního bufferu, kde je smíchána. Pro pohyb scény (tzv.{\em{jittering}}) jsou pou¾ity fukce {\texttt{{accFrustum()}}} a {\texttt{{accPerspective()}}}.

Následující pseudokód popisuje akumulaci do akumulaèního bufferu:

\begin{Verbatim}[fontsize=\small]
vyèisti akumulaèní buffer;
for( i = 0; i < n; i++)
{
vyèisti color-buffer a buffer hloubky;
nastav perspektivu za pou¾ití jitter[i];
vykresli scénu;
pøidej color-buffer do akumulaèního bufferu; 
}
zkopíruj akumulaèní buffer do color-bufferu;
\end{Verbatim}

Pøed samotnou akumulací je nutné vyèistit akumulaèní buffer pomocí funkce {\texttt{{glClear()}}}.

Promìnná {\texttt{{n}}} udává poèet akumulací. Její hodnota razantnì ovlivòuje dobu vykreslování, ale i výslednou kvalitu. V~programu {\em{FloorPlanner}} lze její hodnotu nastavit optimálnì dle rychlosti právì pou¾ívaného hardwaru.

Akumulace probíhá vykreslováním do {\em{color-bufferu}}, jeho¾ obsah je následnì zkopírován do akumulaèního bufferu. Proto je nutné pøi ka¾dém cyklu vyèistit jak {\em{color-buffer}}, tak {\em{buffer hloubky}}.

Pro nastavení perspektivy se pou¾ívá funkce {\texttt{{accPerspective()}}}, která je upravenou verzí funkce {\texttt{{gluPerspective()}}}. Oproti pùvodní funkci má dva nové parametry pro posunutí scény. Hodnoty posunutí jsou ulo¾eny v~poli {\texttt{{jitter[n]}}}. Optimální hodnoty pro co nejlep¹í výsledky jsou pou¾ity z~\docbooktolatexcite{OpenGL}{}.

Následnì jsou bì¾ným zpùsobem vykresleny v¹echny objekty scény do {\em{collor-bufferu}}. V~aplikaci {\em{FloorPlanner}} to znamená, ¾e na instance tøídy {\texttt{{Room}}} a {\texttt{{MaterialCalculation}}} je volána metoda {\texttt{{displayGL()}}}.

Ani¾ by byl {\em{color-buffer}} zobrazen, je jeho obsah pomocí funkce {\texttt{{glAccum()}}} s~parametrem {\texttt{{GL\_ACCUM}}} zkopírován do akumulaèního bufferu.

Po skonèení akumulaèního cyklu jsou pøíkazem {\texttt{{glAccum()}}} s~parametrem {\texttt{{GL\_RETURN}}} akumulovaná data jednodu¹e zkopírována zpìt do {\em{color-bufferu}} a zobrazena.

% ------------------------   
% Section 
\section{Teselace}
\label{sec0604}\hypertarget{sec0604}{}%

Samotné {\em{OpenGL}} doká¾e zobrazit pouze základní primitiva, jako jsou body, úseèky, trojúhelníky a konvexní polygony. Kvùli optimalizaci svìtelného modelu tak nezvládá korektnì zobrazit konkávní polygony, tedy polygony mající nejménì jeden vnitøní úhel vìt¹í ne¾ {\em{$\pi$}}. Takovýto pøípad v¹ak mù¾e v~aplikaci {\em{FloorPlanner}} u~podlahy i stropu bì¾nì nastat, a proto je nutné provést teselaci a získat rozdìlením jednoho konkávního polygonu nìkolik, ji¾ konvexních, trojúhelníkù. Nadstavbová knihovna {\em{GLU}} pro tento úèel nabízí sadu procedur a funkcí.

Grafická data podlahy i stropu jsou ulo¾ena v~zobrazovacích seznamech uvnitø instance tøídy {\texttt{{Floor}}}. Její metoda {\texttt{{tessellate()}}} získá vrcholy polygonu z~pole {\texttt{{vertices}}} instance tøídy {\texttt{{Room}}}. Pro teselaci je nutné provést nìkolik krokù. Prvním z~nich je definovat sadu funkcí zpìtného volání. Jednotlivì jsou pak volány pøi vzniku urèitých událostí bìhem vykonávání algoritmu. Kromì jednoduchých volání pro zaèátek a konec vykreslování, je zde také volání pro definici chování vrcholù s~nastavením normál. Posledním a nejdùle¾itìj¹ím voláním je o¹etøení chyb pøi teselaci. Toto volání speciálnì reaguje na chybu køí¾ení dvou stìn. Tímto je o¹etøen tento chybný u¾ivatelský vstup.

Teselace je podmíòena vytvoøením teselaèního objektu. Na nìj jsou navázána vý¹e zmiòovaná zpìtná volání. {\em{GLU}} umo¾òuje vykreslování polygonu s~nìkolika samostatnými èástmi. Tato vlastnost je v¹ak vylouèena \hyperlink{sec0501}{algoritmem øazení zdí}. Algoritmu jsou tedy pøedány body získané z~pole {\texttt{{vertices}}} a ten je zpracuje jako jeden uzavøený celek. Celý proces je ukládán do zobrazovacích seznamu, který je následnì vykreslen poprvé jako podlaha a podruhé posunutì a pøevrácenì podle roviny {\em{xy}} jako strop místnosti.

% ------------------------   
% Section 
\section{Vyplnìní polygonu}
\label{sec0605}\hypertarget{sec0605}{}%

Stì¾ejním úkolem práce bylo implementovat korektní algoritmus pro kalkulaci a vizualizaci plovoucích podlah v~interiéru. Pro tento úèel bylo jako nejideálnìj¹í vyhodnoceno {\em{øádkové vyplòování se seznamem aktivních hran}}. Aspekty vedoucí k~výbìru a podrobnìj¹í popis tohoto algoritmu je obsahem \hyperlink{sec0403}{kapitoly 4.3}.

Algoritmus byl ov¹em podstatnì upraven. Ní¾e je vypsán výèet vlastností, které jsou pro pou¾ití v~aplikaci {\em{FloorPlanner}} nedostateèné nebo nevhodné a musely být upraveny.

\begin{itemize}
%--- Item
\item 
{\bfseries{Pravidelný rastr}} --- algoritmus je vytvoøen pro vyplòování pravidelného rastru. Øádek je tedy v¾dy urèen celým èíslem. V~aplikaci {\em{FloorPlanner}} se v¹ak vyplòuje podlahovými dílci o~neceloèíselné ¹íøce, resp. vý¹ce. Posun na nový øádek tedy neprobíhá sní¾ením souøadnice {\em{y}} o~jednièku, ale o~¹íøku dílce.

%--- Item
\item 
{\bfseries{Nepøesné vyplnìní polygonu}} --- pøi vyplnìní polygonu pùvodním algoritmem nemusí být vyplnìna celá plocha polygonu, proto¾e hranièní body jsou pouze aproximací pùvodních geometricky zadaných hran. To v¹ak je ne¾ádoucí, nebo» podlahové dílce musí zakrývat celou plochu místnosti.

%--- Item
\item 
{\bfseries{Kompromisy pøi zpracování vrcholù}} --- jakmile se algoritmus dostane ke konci hrany, pro zachování sudého poètu hran ji vyøadí z~dal¹ího zpracování a poèítá jen s~hranou na ní navazující. Nìkdy jsou hrany v~pøedzpracování dokonce zkracovány o~jednièku, aby na sebe nenavazovaly. Aby v¹ak byl vyplnìn celý prostor místnosti, je zapotøebí chování na vrcholech o¹etøit pokroèilej¹ím mechanismem.

%--- Item
\item 
{\bfseries{Tabulka hran}} --- v~této tabulce odpovídá jeden øádek jednomu øádku v~rastru. Hrany jsou ulo¾eny do øádkù, ve kterých zaèínají. Pøi neceloèíselném zpracování by tabulka byla zbyteèná, a tak je místo ní pou¾it obyèejný seznam se sestupným øazením podle souøadnice {\em{y}} poèáteèního bodu.

\end{itemize}
\noindent 

Pozmìnìný algoritmus se v~aplikaci {\em{FloorPlanner}} sestává ze tøí oddìlených èástí. Po definici potøebných datových struktur jsou tyto èásti obsahem následujících tøí kapitol. V~první èásti je naplnìn {\em{seznam hran}}. Dal¹í èástí je cyklus zpracovávající jednotlivé øádky vyplòování. Zde je tøeba o¹etøit chování na vrcholech a ve správný okam¾ik pøidávat èi odebírat hrany ze {\em{seznamu aktivních hran}}. Tøetí èástí je zpracování úsekù na aktuálním øádku, je¾ se vyplòují jednotlivými podlahovými dílci.
\subsection{Datové struktury}
\label{sec060501}\hypertarget{sec060501}{}%

Následuje popis datových struktur pou¾itých pøi vyplòování. Základními strukturami jsou hrana a podlahový dílec.

\begin{Verbatim}[fontsize=\small]
struct Edge /* hrana */
{
    GLfloat y_begin;      /* souradnice y pocatecniho bodu */
    GLfloat x_end, y_end; /* souradnice koncoveho bodu */
    GLfloat x_current;    /* souradnice x pruseciku s atualnim radkem */
    GLfloat x_increment;  /* zmena x_current pri prechodu na novy radek*/ 
};
struct Tile /* podlahový dílec */
{
    GLfloat x,y;  /* rozmery podlahoveho dilce */
};
\end{Verbatim}

Hrany jsou získány z~pole {\texttt{{vertices}}} v~instanci tøídy {\texttt{{Room}}}, a to v~pouze v~pøípadì, ¾e hrany tvoøí uzavøený polygon. Velikost podlahových dílcù je závislá na aktuálnì vybraném typu podlahy. Pro ulo¾ení aktuální pozice algoritmu v~polygonu slou¾í promìnné {\texttt{{x\_alg}}} a {\texttt{{y\_alg}}}.

\begin{Verbatim}[fontsize=\small]
GLfloat x_alg; /*souradnice x v aktualnim radku*/ a
GLfloat y_alg; /*souradnice y aktualního radku*/.
\end{Verbatim}

Dal¹ími strukturami jsou kontejnery pro uchovávání hran, oøezaných podlahových dílcù a údajù o~vzájemném posunutí dvou øad vùèi sobì. Podrobnìji jsou vysvìtleny ní¾e v~popisu algoritmu.
\subsection{Inicializace}
\label{sec060502}\hypertarget{sec060502}{}%

Pole {\texttt{{vertices}}} je pøedáno na vstup algoritmu. Pokud je vyplòování provedeno pod úhlem $\alpha$ , jsou v~tu chvíli v¹echny body pole {\texttt{{vertices}}} otoèeny o~--$\alpha$. Hrany jsou poté ulo¾eny s~orientací shora dolù do {\em{seznamu hran}}.

\begin{Verbatim}[fontsize=\small]
list<Edge> edgelist; /*seznam hran*/
\end{Verbatim}

Vodorovné hrany jsou zanedbatelné. Nejsou tedy do seznamu hran ulo¾eny. U~ka¾dé hrany je vypoèítán její pøírùstek {\em{x}} pøi pøechodu na nový øádek. Seznam je následnì setøídìn sestupnì podle atributu {\texttt{{y\_begin}}}. Promìnné {\texttt{{y\_alg}}} je pøiøazena hodnota {\texttt{{y\_begin}}} první hrany {\em{seznamu hran}} {\texttt{{edgelist}}}.

Kalkulaci spotøebovaného materiálu zaji¹»uje celoèíselné poèítadlo {\texttt{{tile\_counter}}}. Pøed spu¹tìním algoritmu je poèítadlo vynulováno.

Celý následující proces se z~dùvodu optimalizace ukládá do zobrazovacího seznamu. Pokud bylo prvnì pole {\texttt{{vertices}}} otoèeno, musí být nyní modelová matice vynásobena rotaèní maticí s~úhlem $\alpha$.
\subsection{Zpracování hran na jednotlivých øádcích}
\label{sec060503}\hypertarget{sec060503}{}%

Ji¾ z~názvu algoritmu je patrné, ¾e postupuje po øádcích, a to od maximální souøadnice {\em{y}} vyplòovaného polygonu po minimální. V~jednotlivých øádcích se vyplòují úseky mezi hranami v~{\em{seznamu aktivních hran}}.

\begin{Verbatim}[fontsize=\small]
list<Edge> activeedgelist; /*seznam aktivnich hran*/
\end{Verbatim}

Úkolem této èásti algoritmu je udr¾ovat právì {\em{seznam aktivních hran}} aktuální. Pøi zpracování jednotlivých øádkù je tøeba nalézt vrcholy polygonu, které se v~tomto øádku nacházejí. Hrany, které v~tìchto vrcholech v~daném øádku zaèínají èi konèí, jsou ulo¾eny do seznamu {\texttt{{vertexedgelist}}}.

\begin{Verbatim}[fontsize=\small]
list<Edge> vertexedgelist; /*seznam koncicich a zacinajicich hran*/
\end{Verbatim}

Zaèínající hrany jsou zde pøesunuty ze {\em{seznamu hran}} a konèící ze {\em{seznamu aktivních hran}}. Po seøazení seznamu vzestupnì podle atributu {\texttt{{x\_current}}} odpovídají v¾dy dvì po sobì jdoucí hrany jednomu vrcholu, popøípadì dvìma vrcholùm spojených vodorovnou hranou. Nyní je potøeba vyhodnotit situaci na vrcholu a podle toho umístit, nebo naopak neumístit hrany do dvou následujících seznamù.

\begin{Verbatim}[fontsize=\small]
list<Edge> preedgelist; /*seznam aktivnich hran pro aktualni radek*/
list<Edge> postedgelist;  /*seznam aktivnich hran pro pristi radek*/
\end{Verbatim}

Pøi vyhodnocování je brán ohled na to, zda se v~budoucím seznamu {\texttt{{activeedgelist}}} bude jednat o~lichou, nebo sudou hranu. Tedy zda vyplòování aktuálního úseku bude probíhat od této hrany, nebo po tuto hranu. Pøíklad je na obrázku 6.3, kde je vidìt, ¾e i pøi stejném tvaru hran se vlevo bude v~aktuálním øádku zpracovávat zaèínající hrana, zatímco vpravo je zapotøebí je¹tì pou¾ít konèící hranu. Dal¹ími ovlivòujícími faktory jsou znaménko atributu {\texttt{{x\_inkrement}}}, velikost {\texttt{{x\_inkrement}}} nebo zda obì hrany ve vrcholu konèí èi zaèínají. Pøed vykreslením aktuálního øádku jsou {\em{seznamu aktivních hran}} pøiøazeny hrany seznamu {\texttt{{preedgelist}}} a po vykreslení pak hrany seznamu {\texttt{{postedgelist}}}.

% figure ------------------------------------------------------
\begin{figure}[hbt]
\hypertarget{pic06050301}{}%
\begin{center}

{{\includegraphics[]{sah01}}\hypertarget{id384807}{}%
\label{id384807}
}
{{\caption[{Pøíklad zpracování konèících a zaèínajících hran.}]{{{Pøíklad zpracování konèících a zaèínajících hran.}}}\label{pic06050301}}}
\end{center}
\end{figure}

K~dodr¾ení minimálního posunu mezi dílci ve dvou sousedících øadách slou¾í kontejner {\texttt{{lastshift}}}.

\begin{Verbatim}[fontsize=\small]
vector<GLfloat> lastshift; /*vektor posunu dilcu predchoziho radku*/
\end{Verbatim}

Nastavení hodnot jeho vnitøních prvkù se vztahuje a¾ k~následující kapitole, av¹ak velikost tohoto kontejneru se musí øe¹it právì zde. Posun dílcù vùèi sobì se poèítá pro ka¾dý úsek øádku oddìlenì, tudí¾ ka¾dý prvek odpovídá jednomu úseku, tedy dvìma hranám v~{\em{seznamu aktivních hran}}. Pøi zvìt¹ení èi zmen¹ení {\em{seznamu aktivních hran}} je tøeba pøizpùsobit i velikost kontejneru {\texttt{{lastshift}}}.

Pro pøechod na nový øádek je od aktuálního {\texttt{{y\_alg}}} odeètena velikost {\em{y}} podlahového dílce. Hrany {\em{seznamu aktivních hran}} jsou nahrazeny hranami seznamu {\texttt{{postedgelist}}}, pøièem¾ je pro ka¾dou hranu provedena operace pøiètení {\texttt{{x\_increment}}} k~{\texttt{{x\_current}}}. V~pøípadì zaèínajících hran ov¹em musí dojít k~pøiètení pouze èásteèného pøírùstku.
\subsection{Vykreslení podlahových dílcù do úsekù na øádku}
\label{sec060504}\hypertarget{sec060504}{}%

Vykreslování jednoho øádku je rozdìleno na úseky. Vykreslované úseky se nachází v¾dy mezi lichou a sudou hranou {\em{seznamu aktivních hran}}. Ten v¹ak musí být na zaèátku ka¾dého øádku seøazen vzestupnì podle {\texttt{{x\_current}}}. Následující postup popisuje vykreslení dílcù v~rámci jednoho úseku mezi dvìmi hranami. U~ostatních úsekù na øádku je postup analogický.

Aktuální souøadnice {\texttt{{x\_alg}}} je nastavena na hodnotu {\texttt{{x\_current}}} první, tedy liché, hrany. Pokud má tato hrana záporný pøírùstek {\texttt{{x\_increment}}}, je k~souøadnici {\texttt{{x\_alg}}} pøièten. Pokud se navíc jedná o~konèící hranu, je pøiètený pøírùstek pouze èásteèný. Analogicky je nastavena hodnota promìnné {\texttt{{x\_stop}}}, obsahující souøadnici {\em{x}}, kde daný úsek konèí.

% figure ------------------------------------------------------
\begin{figure}[hbt]
\hypertarget{pic06050401}{}%
\begin{center}

{{\includegraphics[]{sah03}}\hypertarget{id384929}{}%
\label{id384929}
}
{{\caption[{Nastavení promìnných na zaèátku úseku.}]{{{Nastavení promìnných na zaèátku úseku.}}}\label{pic06050401}}}
\end{center}
\end{figure}

Úseky jsou vyplòovány podlahovými dílci obdélníkového tvaru. I~na zkosených hranách mají podlahové dílce pro lep¹í pøehlednost obdélníkový tvar. Na konci a nìkdy i na zaèátku ka¾dého úseku dochází ke zkrácení dílce. Zbytek v¹ak nemù¾e být pova¾ován za odpad, ale musí být ulo¾en pro pou¾ití v~nìkteré z~následujících øad. Tyto zkrácené dílce jsou uchovány ve dvou, dle velikosti {\em{x}} seøazených, seznamech dílcù.

\begin{Verbatim}[fontsize=\small]
list<Tile> leftcut_tiles;  /*seznam zleva zkracených dilcu*/
list<Tile> rightcut_tiles; /*seznam zprava zkracených dilcu*/
\end{Verbatim}

Nejdùle¾itìj¹í podmínkou pøi pokládce plovoucích podlah je dodr¾ovat minimální posun mezi dvìmi sousedícími øadami. Proto je nutné správnì zvolit první dílec ka¾dého úseku tak, aby byl posun vùèi pøedchozí øadì dostateèný. K~tomu je pou¾it vý¹e zmiòovaný kontejner {\texttt{{lastshift}}}, do kterého je v¾dy zaznamenána souøadnice {\em{x}} spojnice dvou dílcù. Tato hodnota je pak pou¾ita na dal¹ím øádku pro vlo¾ení správnì dlouhého prvního dílce.

% figure ------------------------------------------------------
\begin{figure}[hbt]
\hypertarget{pic06050402}{}%
\begin{center}

{{\includegraphics[]{sah02}}\hypertarget{id384976}{}%
\label{id384976}
}
{{\caption[{Minimální posun dvou øad vùèi sobì.}]{{{Minimální posun dvou øad vùèi sobì.}}}\label{pic06050402}}}
\end{center}
\end{figure}

První mo¾ností je pou¾ít jeden ze zkrácených dílcù z~pøedchozích øad. Ze seznamu zkrácených dílcù {\texttt{{leftcut\_tiles}}} je vybrán nejdel¹í dílec splòující podmínku dostateèného posunu. Výbìr nejdel¹ího dílce je dùle¾itý pro sní¾ení poètu spotøebovaných dílcù. Druhou mo¾ností je pou¾ít na zaèátek celý dílec. To v¹ak kvùli dodr¾ení minimálního posunu také nemusí být mo¾né. Pokud pøedchozí dva zpùsoby nevedou k~úspìchu, je nutné zkrátit nový celý dílec. Zde je velmi dùle¾ité spolehlivì vyhodnotit situaci a zkrátit dílec co nejménì. Zbytek dílce je ulo¾en do seznamu zprava zkrácených dílcù {\texttt{{rightcut\_tiles}}}.

Hodnota promìnné {\texttt{{x\_alg}}} je nastavena za první dílec. Následuje vyplnìní úseku celými dílci. Po ka¾dém dílci je hodnota {\texttt{{x\_alg}}} zvìt¹ena o~délku podlahového dílce. Na konci ka¾dého úseku je vìt¹inou opìt nutné pou¾ít zkráceného dílce. Na potøebnou délku je zkrácen buï dostateènì dlouhý dílec ze seznamu {\texttt{{rightcut\_tiles}}}, nebo celý dílec. Zatímco zbytek z~ji¾ oøezaného dílu ji¾ zde tvoøí nepou¾itelný odpad, zbytek z~oøezaného celého dílce je ulo¾en do seznamu {\texttt{{leftcut\_tiles}}} pro pøípadné pou¾ití na zaèátek nìkteré z~dal¹ích øad.

Svou roli zde hraje i atribut {\texttt{{tile\_counter}}}. S~ka¾dým pou¾itým novým dílcem se jeho hodnota inkrementuje. Ve finále tento atribut udává poèet spotøebovaných podlahových dílcù.

% ------------------------   
% Section 
\section{Mapování náhodných textur}
\label{sec0606}\hypertarget{sec0606}{}%

Plovoucí podlahy vynikají pestrostí vzorù a kreseb, které døevo vytváøí. Pou¾ití jedné opakující se textury by výsledný zá¾itek z~podlahy dosti degradovalo. Pro vìt¹í variabilitu a reálnìj¹í vzhled je v~aplikaci {\em{FloorPlanner}} pro ka¾dý typ podlahy pou¾ito celkem ètyø rùzných textur. Textury jsou fotokopiemi pùvodních plovoucích podlah v~dostateèném rozli¹ení.

Nebo» jsou lamely plovoucích podlah v¾dy nejménì ètyønásobnì dlouhé, ne¾ jsou ¹iroké a {\em{OpenGL}} ve star¹ích verzích dovoluje pou¾ití pouze textur o~velikosti mocniny dvou, je mo¾né ulo¾it tyto ètyøi textury jednotlivých lamel do textury jedné. Bìhem kalkulace materiálu je pak ka¾dému vykreslovanému dílu pøedána náhodnì jedna ze ètyø sad texturových souøadnic. Tím je dosa¾eno vizuálnì uspokojivé variabilnosti podlahy.

% figure ------------------------------------------------------
\begin{figure}[hbt]
\hypertarget{pic060601}{}%
\begin{center}

{{\includegraphics[]{tex01}}\hypertarget{id385060}{}%
\label{id385060}
}
{{\caption[{Pøíklad a aplikace textury se ètyømi variantami lamel plovoucí podlahy.}]{{{Pøíklad a aplikace textury se ètyømi variantami lamel plovoucí podlahy.}}}\label{pic060601}}}
\end{center}
\end{figure}

% -------------------------------------------------------------
% Chapter Závìr 
% ------------------------------------------------------------- 	
\chapter{Závìr}
\label{ch07}\hypertarget{ch07}{}%

Aplikace pro návrh a kalkulaci plovoucích podlah jsou velkým pøínosem pøi realizaci interiérù. Mìly by poskytnout zákazníkùm firem, zabývajících se prodejem a pokládkou podlah, nástroj pro zhmotnìní a ucelení jejich pøedstav. Zákazníci tak získávají nejen dobrý pocit z~dobøe vynalo¾ených financí, ale díky pøesnìj¹í kalkulaci také skuteènì u¹etøí. Firmám se naopak sní¾í mno¾ství navráceného materiálu i konfliktù se zákazníky. Bohu¾el v~této sféøe zatím není dostupný ¾ádný softwarový produkt. Proto v~rámci této práce vznikla jednoduchá CAD aplikace {\em{FloorPlanner}} pro rychlý návrh plovoucích podlah.

V~této bakaláøské práci byla nejprve rozvinuta problematika pokládky plovoucích podlah. Byly popsány rùzné typy pokládky i faktory ovlivòující spotøebu materiálu. Tím byly stanoveny po¾adavky na aplikaci. Dále byl rozveden vývoj a souèasný stav CAD systémù. Zejména pak byly zdùraznìny výhody objektovì orientovaných AEC/CAD aplikací, je¾ vedly k~výbìru tohoto pøístupu pro aplikaci {\em{FloorPlanner}}.

Byly zde zhodnoceny i jiné aplikace pro vizualizaci plovoucích podlah. K~dispozici jsou v¹ak jen jednoduché webové aplikace nebo pøíli¹ komplikovaná a drahá øe¹ení, která navíc nejsou pro pokládku plovoucích podlah pøímo urèena. Proto jsou nedostaèující.

Pro vytvoøení vhodné aplikace bylo potøeba specifikovat po¾adavky a následnì vybrat vhodné metody a algoritmy, které jsou nutné pro vyhovìní v¹ech po¾adavkù správné pokládky podlah i následné vizualizace. Implementací tìchto metod spolu s~jednoduchým u¾ivatelským prostøedím vznikla aplikace {\em{FloorPlanner}}. Byla navrhnuta tak, aby vyhovìla nárokùm pro co nejpøesnìj¹í kalkulaci materiálu. Je toho docíleno simulací postupù pøi skuteèné pokládce. V~atypických prostorách lze takto zpøesnit odhad oproti klasickým postupùm a¾ o~nìkolik procent. Vzhledem k~vysokým cenám tìchto materiálù mù¾e vést k~finanèní úlevì jak pro firmy, tak i pro jejich zákazníky. Navíc je mo¾né podlahy relativnì reálnì zobrazit v~jejich cílovém prostoru a tak u~zákazníka sní¾it strach z~neznáma a zvý¹it ochotu investovat.

Vzhledem k~velkým úsporám díky této aplikaci bude i nadále vývoj aplikace pokraèovat a roz¹iøovat své zamìøení i na jiné podlahové materiály. Tato práce také ukázala, ¾e na trhu je v~této problematice, i pøes pøínos tìchto øe¹ení, stále hluché místo.
% ------------------------------------------- 
%
%  Bibliography - chapter
%
% ------------------------------------------- 
\begin{thebibliography}{123}\hypertarget{id385110}{}

% ............. biblioentry 
\bibitem{CAD}\docbooktolatexbibaux{id385299}{CAD}
\hypertarget{id385299}
Fischer, M. a Vanìk, P.: \emph{CAD I-V}, e-Architekt.cz, 2004, Seriál dokumentù dostupný na 
      {\textless}\url{http://www.e-architekt.cz/}{\textgreater} (leden 2008). 

% ............. biblioentry 
\bibitem{CAD history}\docbooktolatexbibaux{id385256}{CAD history}
\hypertarget{id385256}
Bozdoc, M.: \emph{iMB The History of CAD}, MB Solutions, 2004, Dokument dostupný na 
         {\textless}\url{http://mbinfo.mbdesign.net/CAD-History.htm}{\textgreater} (leden 2008)
      . 

% ............. biblioentry 
\bibitem{OpenGL}\docbooktolatexbibaux{id385113}{OpenGL}
\hypertarget{id385113}
Shreiner, D. a Woo, M. a Neider, J. a Davis, T.: \emph{OpenGL Prùvodce programátora}, Computer Press, a.s., 2006, 80-251-1275-6. 

% ............. biblioentry 
\bibitem{adv oGL}\docbooktolatexbibaux{id385396}{adv oGL}
\hypertarget{id385396}
McReynolds, T. a Blythe, D.: \emph{Advanced Graphics Programming Techniques Using OpenGL}, Elsevier Inc., 2005, 1-55860-659-9, Dokument dostupný na adrese
         {\textless}\url{http://web.informatik.uni-bonn.de/II/ag-klein/global/proseminar_ss2001/course12.pdf}{\textgreater} (leden 2008)
      . 

% ............. biblioentry 
\bibitem{mpg}\docbooktolatexbibaux{id385186}{mpg}
\hypertarget{id385186}
®ára, J. a Bene¹, B. a Sochor, J. a Felkel, P.: \emph{Moderní poèítaèová grafika}, Computer Press, a.s., 2004. 

% ............. biblioentry 
\bibitem{nehe}\docbooktolatexbibaux{id385504}{nehe}
\hypertarget{id385504}
Turek, M.: \emph{CZ NeHe OpenGL}, Michal Turek, 2004, Dokument dostupný na 
         {\textless}\url{http://nehe.ceske-hry.cz/download/download/cz_nehe_opengl.pdf}{\textgreater} (leden 2008)
      . 

% ............. biblioentry 
\bibitem{oGL bible}\docbooktolatexbibaux{id385454}{oGL bible}
\hypertarget{id385454}
Wright, R. a Lipchak, B.: \emph{OpenGL Super Bible}, Macmillan Computer Publishing, 1996, 1-57169-073-5. 

% ............. biblioentry 
\bibitem{scanline}\docbooktolatexbibaux{id385353}{scanline}
\hypertarget{id385353}
Snapp, R.: \emph{Scanline Fill Algorithm}, Department of Computer Science, University of Vermont, 2003, Dokument dostupný na 
         {\textless}\url{http://www.cs.uvm.edu/~snapp/teaching/CS274/lectures/scanlinefill.pdf}{\textgreater} (leden 2008)
      . 

\end{thebibliography}
\addcontentsline{toc}{chapter}{Literatura}

\newcommand{\dbappendix}[1]{\chapter{#1}}%
% ------------------------------------------------------------- 
% Appendices start here
% -------------------------------------------------------------
\appendix

% -------------------------------------------------------------
% appendix:  Návod k pou¾ití aplikace FloorPlanner 
% ------------------------------------------------------------- 	
\dbappendix{Návod k~pou¾ití aplikace FloorPlanner}
\label{appA}\hypertarget{appA}{}%

% ------------------------   
% Section 
\section{Úvod}
\label{secA01}\hypertarget{secA01}{}%

{\em{FloorPlanner}} je aplikace pro vizualizaci a kalkulaci plovoucích podlah v~interiéru. Je urèena pro platformu {\em{Win32}}. Nabízí základní {\em{AEC/CAD}} funkce pro tvorbu místností, v~nich¾ je plovoucí podlaha realizována. V~pøí¹tích kapitolách tohoto návodu jsou podrobnìji rozvedeny v¹echny funkce programu.

% ------------------------   
% Section 
\section{U¾ivatelské prostøedí}
\label{secA02}\hypertarget{secA02}{}%

U¾ivatelské prostøedí aplikace FloorPlanner se dìlí na dvì èásti. Vpravo jsou rozmístìny ovládací prvky pro tvorbu, ovládání, editaci i odstraòování objektù zobrazených v~èásti vlevo. Práce na projektu se pak logicky dìlí na dva zpùsoby. Prvním je kresba pùdorysu místnosti na kreslicí plochu. Druhým je pak vizualizace a prezentace místnosti v~trojrozmìrném re¾imu. Pøepínání mezi tìmito re¾imy zaji¹»uje dvojice tlaèítek v~horní èásti pravého panelu.

% ------------------------   
% Section 
\section{Dvojrozmìrný re¾im}
\label{secA03}\hypertarget{secA03}{}%

Po spu¹tìní aplikace FloorPlanner je zobrazen dvojrozmìrný re¾im. Místnost je zobrazena formou pùdorysu na pravidelné møí¾ce. Èervenì zvýraznìné pøímky oznaèují osy soustavy. Ve¹keré operace, spojené s~editací místnosti, lze provádìt výhradnì v~tomto re¾imu.

Pokud není vybrána nebo aktivována ¾ádná z~funkcí, nachází se aplikace v~re¾imu výbìru. Kliknutím lze oznaèit jednotlivé zdi, okna, nebo dveøe. V~pravém horním rohu jsou pak zobrazeny informace o~objektu, jako jsou rozmìry, nebo délka.

Manipulace s~kreslicí plochou se provádí pomocí klávesy {\bfseries{Alt}}. V~kombinaci s~levým tlaèítkem my¹i s~plochou posouvá a s~pravým tlaèítkem mìní mìøítko.

Následuje vysvìtlení funkcí jednotlivých prvkù rozvinovacích panelù, kterými se lze pøepnout do rùzných re¾imù. Pro provedení nìkterých akcí je nutné nejdøív oznaèit objekt, na nìj¾ bude funkce aplikována.
\subsection{panel Wall editing}
\label{secA0301}\hypertarget{secA0301}{}%

Ve¹keré prvky pro pøidávání, odebírání èi editaci zdí, tedy i tvaru celé místnosti, jsou obsa¾eny v~tomto panelu.

\begin{itemize}
%--- Item
\item 
{\bfseries{Add walls}} --- stisknutím tohoto tlaèítka se aplikace pøepne do stavu pro vkládání zdí. Kliknutím a tahem levého tlaèítka lze pak na plo¹e vlevo vytváøet nové zdi. Se stisknutou klávesou {\bfseries{Shift}} lze navíc vytváøet pouze svislé èi vodorovné zdi. Pro propojení dvou zdí je nutné vytvoøit jejich krajní body dostateènì blízko sebe. Zeï je tvoøena obdélníkem se zvýraznìnou jednou hranou. Ta oznaèuje vnitøní okraj místnosti.

%--- Item
\item 
{\bfseries{Rotate wall}} --- v~pøípadì vytvoøení zdi se ¹patnou orientací je mo¾né zeï oznaèit a následnì tímto tlaèítkem otoèit o~180°. Pokud je oznaèená zeï spojená s~jinými zdmi, je i jejich orientace pøizpùsobena.

%--- Item
\item 
{\bfseries{Remove wall}} --- toto tlaèítko slou¾í k~odstranìní oznaèené zdi. Spolu se zdí budou odstranìny i ve¹keré její okna a dveøe.

%--- Item
\item 
{\bfseries{Clear all}} --- jednoduchý pøíkaz pro odstranìní v¹ech objektù na kreslicí plo¹e.

%--- Item
\item 
Editovatelná pole {\bfseries{1.point}} a {\bfseries{2.point}} --- pøi oznaèení zdi jsou v~tìchto polích uvedeny souøadnice prvního i druhého bodu zdi. Jejich editací lze se zdí manipulovat. Pokud zeï sousedí s~jinou zdí, jsou souøadnice upraveny i u~ní. Posunem dvou bodù blízko sebe v¹ak nelze dvì rozdìlené zdi propojit.

\end{itemize}
\noindent 
\subsection{panel Floor}
\label{secA0302}\hypertarget{secA0302}{}%

Panel {\em{Floor}} obsahuje prvky pro práci s~podlahou. Kalkulace i zobrazení podlahy je podmínìna uzavøením místnosti. Zdi tedy musí tvoøit jeden uzavøený polygon bez vzájemného køí¾ení zdí.

\begin{itemize}
%--- Item
\item 
{\bfseries{Display floor}} --- zásadním prvkem tohoto panelu je toto za¹krtávací tlaèítko. Pøi splnìní podmínky uzavøenosti místnosti je provedena kalkulace podlahy a plocha místnosti je vyplnìna dílci plovoucí podlahy. V~levém horním rohu jsou pak uvedeny informace o~potøebném materiálu pro vykreslenou místnost.

%--- Item
\item 
{\bfseries{Refresh}} --- v~pøípadì zmìny nìkterého z~parametrù podlahy je nutné toto tlaèítko pou¾ít pro pøepoèítání a pøekreslení podlahy.

%--- Item
\item 
{\bfseries{Floor angle}} --- hodnota tohoto pole udává pod jakým úhlem bude podlaha v~místnosti vyskládávána. Pùvodní hodnota 0° znamená smìr shora dolù.

%--- Item
\item 
{\bfseries{Get wall angle}} --- smìr pokládky plovoucí podlahy se vìt¹inou øídí jednou ze zdí místnosti. Tímto tlaèítkem lze nastavit úhel pokládky podle právì oznaèené zdi. Hodnota je také zkopírována do pole {\em{Floor angle}}.

%--- Item
\item 
{\bfseries{Shift limit}} --- tato hodnota je velice dùle¾itá pro koneènou spotøebu materiálu. Zmìnou lze nastavit minimální posun v~procentech mezi dvìma sousedními øadami. Sní¾ením na povolené minimum tak lze èásteènì u¹etøit materiál. Hodnota musí být men¹í ne¾ 50\%.

%--- Item
\item 
{\bfseries{Trash limit}} --- udává délku zbytku ze zkrácené lamely, který ji¾ bude pova¾ován za odpad. Zvìt¹ením lze dosáhnout pravidelnìj¹ího vzoru.

%--- Item
\item 
{\bfseries{Type}} --- jednotlivé typy a vzory plovoucích podlah jsou obsahem právì tohoto seznamu. Výbìrem po¾adované podlahy je místnost vyplnìna podlahovými dílci s~odpovídající velikostí i texturou.

\end{itemize}
\noindent 
\subsection{panel Windows/Doors editing}
\label{secA0303}\hypertarget{secA0303}{}%

Tento panel nabízí nástroje pro vlo¾ení dveøí a oken. Vytváøí tedy velikostnì nastavitelné otvory ve zdech. Pro výbìr mezi vytváøením oken, nebo dveøí slou¾í dvì tlaèítka pøedvolby.

\begin{itemize}
%--- Item
\item 
{\bfseries{Add}} --- tlaèítko pøepíná do módu pøidávání oken a dveøí. Je nutné, aby v¹echna textová pole v~panelu obsahovala platná data. Okno je pøidáno kliknutím na pøedem oznaèenou zeï.

%--- Item
\item 
{\bfseries{Remove}} --- tlaèítko pro odstranìní oznaèeného okna, nebo dveøí.

%--- Item
\item 
{\bfseries{Width, Height}} --- textová pole pro nastavení vý¹ky a ¹íøky vkládaného okna, nebo dveøí.

%--- Item
\item 
{\bfseries{From floor to object}} --- toto pole je aktivní pouze u~oken a nastavuje vzdálenost spodního okraje okna od podlahy.

\end{itemize}
\noindent 
\subsection{panel Options}
\label{secA0304}\hypertarget{secA0304}{}%

V~tomto panelu je nìkolik doplòujících nastavení ovlivòujících pøedev¹ím zobrazení v~trojrozmìrném re¾imu. Ve dvojrozmìrném módu je pou¾itelná pouze jedna polo¾ka.

\begin{itemize}
%--- Item
\item 
{\bfseries{Set position}} --- toto tlaèítko umo¾òuje nastavení pozice svìtla. Svìtlo je na plo¹e zobrazeno jako malý ¾lutý krou¾ek. Kliknutím na tlaèítko a následnì na kreslicí plochu je svìtlo pøesunuto na pozici pod kurzorem.

\end{itemize}
\noindent 

% ------------------------   
% Section 
\section{Trojrozmìrný re¾im}
\label{secA04}\hypertarget{secA04}{}%

Tento re¾im aplikace {\em{FloorPlanner}} slou¾í pøedev¹ím pro presentaèní úèely. Zobrazuje místnost v~trojrozmìrném pohledu první osoby. Pohyb prostorem umo¾òuje kombinace kurzorových ¹ipek a my¹i. Kurzorové ¹ipky umo¾òují pohyb v¹emi smìry ve vodorovné rovinì. Pohyb my¹i pøi stisknutém levém tlaèítku otáèí pohled pozorovatele. Pravé tlaèítko pak slou¾í ke stoupání a klesání pozorovatele. Oproti dvojrozmìrnému módu je zde jen nìkolik mo¾ností voleb. V¹echny se opìt nacházejí v~pravé èásti aplikace, nyní v¹ak pouze v~jediném rozvinovacím poli.
\subsection{panel Options}
\label{secA0401}\hypertarget{secA0401}{}%

Panel {\em{Options}} skýtá nìkolik nastavení pro zmìnu zobrazení trojrozmìrného re¾imu. Nìkteré volby mohou být velice nároèné na výkon a razantnì tak prodlou¾it výpoèetní èas scény.

\begin{itemize}
%--- Item
\item 
{\bfseries{Light type}} --- ze seznamu lze vybrat jeden z~druhù osvìtlení. Na výbìr je klasické bílé sluneèní svìtlo, na¾loutlé svìtlo ¾árovky a namodrale svítící záøivka.

%--- Item
\item 
{\bfseries{MIP mapping}} --- pøi za¹krtnutí bude aplikace {\em{FloorPlanner}} generovat {\em{MIP map}} textury. Èásteènì tak lze zrychlit bìh aplikace na úkor nároènosti na pamì». Tuto volbu lze zapnout pouze se zapnutým filtrováním (viz {\em{Filtering}}).

%--- Item
\item 
{\bfseries{High quality textures}} --- od¹krtnutím této polo¾ky bude velikost textur zmen¹ena na ètvrtinu. Lze tedy pøi minimální degradaci výsledku o~nìco zrychlit výpoèet a zmen¹it nároky na pamì».

%--- Item
\item 
{\bfseries{Antialiasing}} --- zapnutím antialiasingu lze výraznì potlaèit projevy moiré a \glqq zubatých\textquotedblleft{} hran a docílit tak pøíjemného vyhlazení scény. Tento výpoèet je velice èasovì nároèný a tak je tøeba volit hodnoty optimální pro právì pou¾íváný hardware.

%--- Item
\item 
{\bfseries{Filtering}} --- zapnutím nìkterého typu filtrování lze pøi relativnì nízkém sní¾ení výkonu odstranit nìkteré nepøíjemné efekty textur. Textury v¹ak ztrácejí detaily a mohou pùsobit ponìkud rozmazanì.

\end{itemize}
\noindent 

% -------------------------------------------------------------
% appendix:  Pøilo¾ené CD 
% ------------------------------------------------------------- 	
\dbappendix{Pøilo¾ené CD}
\label{appB}\hypertarget{appB}{}%

K~této bakaláøské práci je pøilo¾en kompaktní disk s~následujícím obsahem:

\begin{itemize}
%--- Item
\item 
Text této bakaláøské práce ve formátech XML, PDF a PS.

%--- Item
\item 
Ve¹keré pou¾ité obrázky ve formátu PNG.

%--- Item
\item 
Zdrojový kód aplikace FloorPlanner vèetnì souborù projektu pro Visual Studio 2005 a pou¾itých textur.

%--- Item
\item 
Zkompilovaná aplikace FloorPlanner vèetnì pou¾itých textur.

\end{itemize}
\noindent 

\end{document}

